{"version":3,"sources":["Exp.js"],"names":["Exp","settings","el","attach","data","methods","model","app","bannerId","getUuid","recommendations","scoped","mounted","backdrop","branded","undefined","html","context","style","sdk","inPreview","__storage","loopDefinitions","initializedLoops","tracking","trigger","type","delay","self","window","addEventListener","setTimeout","inject","__exp_triggered","document","body","e","offsetY","scrollY","action","element","loaded","initializeModel","render","bindModels","bindMethods","bindAttributes","bindClose","bindFors","bindIfs","loadRecommendations","addBackdrop","addBranding","addAnimationClass","track","getEventProperties","control_group","call","Object","keys","forEach","value","key","defineProperty","enumerable","get","set","val","updateBindings","updateModels","updateIfs","updateAttributes","removeBanner","bind","querySelector","createElement","innerHTML","trim","appendChild","firstChild","addStyle","rules","listify","sheet","cssRules","scopedStyle","rule","CSSStyleRule","generateScopedRule","CSSMediaRule","conditionText","parentNode","removeChild","selector","map","input","concat","inputs","select","join","getAttribute","event","target","checked","template","supportedEvents","events","method","apply","supportedAttributes","attr","elements","setAttribute","stopPropagation","preventDefault","expIfs","display","selecor","$refs","expFors","expFor","hasAttribute","split","arrayName","hash","cloneNode","removeAttribute","push","parentElement","siblingElement","nextElementSibling","remove","renderNewElement","item","overridePush","bindings","textContent","modelBindings","that","expForInstance","attrSelector","expAttrs","expBinds","indexOf","findLastField","slice","insertBefore","array","original","Array","prototype","ret","arguments","css","disabled","createTextNode","inserted","selectors","selectorText","selectorsText","addAttributes","includes","length","cssText","backdropStyle","setStyleFromObject","branding","uuid","className","classList","add","rcm","options","recommendationId","id","size","total","callback","loadingKey","fillWithRandom","getRecommendation","list","scope","querySelectorAll","matches","firstPart","Math","random","secondPart","toString","object","property","interactive","banner_id","banner_name","banner_type","variant_id","variant_name","interaction","location","href","path","pathname","items","dict","rec"],"mappings":"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","file":"Exp.map","sourcesContent":["/* Main class */\r\nclass Exp {\r\n    constructor(settings) {\r\n        /* Find DOM element which contains Exp code */\r\n        this.el = settings.el || null;\r\n        /* Find DOM element to which append HTML code */\r\n        this.attach = settings.attach || null;\r\n\r\n        /* Initializing data model */\r\n        this.data = settings.data || {};\r\n        /* Controller methods */\r\n        this.methods = settings.methods || {};\r\n        /* Initializing model */\r\n        this.model = {};\r\n\r\n        /* Initialization of Exp app */\r\n        this.app = null;\r\n\r\n        /* Generate Id for banner */\r\n        this.bannerId = 'e-' + this.getUuid();\r\n        /* Dictionaries describing recommendations */\r\n        this.recommendations = settings.recommendations || {};\r\n\r\n        /* Scoping CSS rules locally for banner */\r\n        this.scoped = settings.scoped || false;\r\n        /* Function triggered after rendering the banner */\r\n        this.mounted = settings.mounted || null;\r\n        /* Backdrop in front of which Exp app will be rendered */\r\n        this.backdrop = settings.backdrop || null;\r\n        /* Adding Exponea branding options, by default black */\r\n        if (settings.branded === undefined || settings.branded === null || (settings.branded && settings.branded !== \"black\" && settings.branded !== \"white\")) {\r\n            this.branded = \"black\";\r\n        } else {\r\n            this.branded = settings.branded;\r\n        }\r\n\r\n        /* Look for either explicit code or for HTML code in context */\r\n        this.html = (_ => {\r\n            if (settings.html !== undefined) return settings.html;\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.html !== undefined) return settings.context.html;\r\n            }\r\n            return null;\r\n        })();\r\n        /* Look for either explicit code or for CSS code in context */\r\n        this.style = (_ => {\r\n            if (settings.style !== undefined) return settings.style;\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.style !== undefined) return settings.context.style;\r\n            }\r\n            return null;\r\n        })();\r\n        /* Exponea SDK passed through context attribute when using production banners */\r\n        this.sdk = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.sdk !== undefined) return settings.context.sdk;\r\n            }\r\n\r\n            return null;\r\n        })();\r\n        /* Exponea banner context */\r\n        this.context = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.data !== undefined) return settings.context.data;\r\n            }\r\n\r\n            return null;\r\n        })();\r\n        /* Check whether banner is in Exponea editor or not */\r\n        this.inPreview = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.inPreview !== undefined) return settings.context.inPreview;\r\n            }\r\n\r\n            return false;\r\n        })();\r\n\r\n        /* Internal storage */\r\n        this.__storage = {\r\n            loopDefinitions: {},\r\n            initializedLoops: {}\r\n        };\r\n\r\n        /* Tracking by default true. Tracks show/close automatically. */\r\n        if (settings.tracking === undefined) {\r\n            this.tracking = true;\r\n        } else {\r\n            this.tracking = settings.tracking;\r\n        }\r\n        /* Setting trigger for banner display */\r\n        this.trigger = settings.trigger || null;\r\n        \r\n        /* If trigger exists, inject into DOM based on the type of the trigger */\r\n        if (this.trigger !== null && !this.inPreview) {\r\n            if (this.trigger.type == \"onready\") {\r\n                /* Renders banner once page elements are loaded */\r\n                const delay = this.trigger.delay || 0;\r\n                var self = this;\r\n                window.addEventListener('load', function() {\r\n                    setTimeout(() => {\r\n                        self.inject();\r\n                    }, delay);\r\n                });\r\n                return;\r\n            } else if (this.trigger.type == \"onexit\") {\r\n                /* Renders banner if user wants to leave the page */\r\n                const delay = this.trigger.delay || 0;\r\n                window.__exp_triggered = false;\r\n                var self = this;\r\n                document.body.addEventListener(\"mouseleave\", function (e) {\r\n                    /* Check window was left */\r\n                    if (e.offsetY - window.scrollY < 0 && !window.__exp_triggered) {\r\n                        window.__exp_triggered = true;\r\n                        setTimeout(() => {\r\n                            self.inject(self);\r\n                        }, delay);\r\n                    }\r\n                });\r\n                return;\r\n            } else if (this.trigger.type = \"onaction\") {\r\n                /* Renders banner on specific user action */\r\n                var self = this;\r\n                var action = this.trigger.action || \"click\";\r\n                const delay = this.trigger.delay || 0;\r\n                if (this.trigger.element) {\r\n                    this.trigger.element.addEventListener(action, function() {\r\n                        setTimeout(() => {\r\n                            self.inject(self);\r\n                        }, delay);\r\n                    });\r\n                }\r\n                return;\r\n            } else {\r\n                /* If incorrect type of trigger is given do not render at all */\r\n                throw `Incorrect trigger type ${ this.trigger.type }`;\r\n            }\r\n        }\r\n        /* If no trigger type inject normally */\r\n        return this.inject();\r\n    }\r\n\r\n    /* Method for injecting the banner into DOM */\r\n    inject() {\r\n        /* For control group do not inject and only track show */\r\n        if (false) { /* TODO: How to check control_group from context */\r\n            this.loaded();\r\n        }\r\n\r\n        /* Initialize model */\r\n        this.initializeModel(this.data);\r\n\r\n        /* Render Exp banner */\r\n        this.render();\r\n\r\n        /* Create the main tunnel of bindings between HTML with JS */\r\n        this.bindModels();\r\n        this.bindMethods();\r\n        this.bindAttributes();\r\n        this.bindClose();\r\n        this.bindFors();\r\n        this.bindIfs()\r\n\r\n        /* Load recommendations */\r\n        this.loadRecommendations()\r\n\r\n        /* Renders optional objects alongside with banners */\r\n        if (this.backdrop !== null) this.addBackdrop();\r\n        if (this.branded !== false) this.addBranding();\r\n        /* Adds exponea-animate class to app */\r\n        this.addAnimationClass();\r\n\r\n        /* Track show if tracking is set to true  */\r\n        if (this.tracking && this.sdk !== null && this.context !== null) {\r\n            this.sdk.track('banner', this.getEventProperties('show', false));\r\n        }\r\n\r\n        /* Call mounted function if set */\r\n        if (this.mounted !== null && !this.control_group) this.mounted.call(this.model);\r\n\r\n        return this.model;\r\n    }\r\n\r\n    /* Initalize model from data */\r\n    initializeModel(data) {\r\n        var self = this;\r\n        Object.keys(data).forEach(key => {\r\n            var value = data[key];\r\n            /* Define new setters to update model on change */\r\n            Object.defineProperty(self.model, key, {\r\n                enumerable: true,\r\n                get() {\r\n                    return value;\r\n                },\r\n                set(val) {\r\n                    value = val;\r\n                    self.updateBindings(key, value);\r\n                    self.updateModels(key, value);\r\n                    self.updateIfs(key, value);\r\n                    self.updateAttributes(key, value);\r\n                }\r\n            });\r\n            self.model[key] = value;\r\n        });\r\n\r\n        /* Copy methods from this.methods to this.model scope so it can be accessed with `this` */\r\n        if (this.methods !== null) {\r\n            for (var key of Object.keys(this.methods)) {\r\n                this.model[key] = this.methods[key];\r\n            }\r\n        }\r\n        /* Bind special methods to be used in `this` scope */\r\n        this.model.removeBanner = this.removeBanner.bind(this, this.app);\r\n        this.model.sdk = this.sdk;\r\n    }\r\n\r\n    /* Render Exp banner by injecting it into DOM and adding style */\r\n    render() {\r\n        /* Use el to find element over which to mask Exp */\r\n        if (this.el !== null) {\r\n            this.app = document.querySelector(this.el);\r\n        /* Otherwise check for HTML code which would be created and injected into DOM */\r\n        } else if (this.html !== null) {\r\n            /* Insert HTML to page */\r\n            let el = document.createElement('div');\r\n            el.innerHTML = this.html.trim();\r\n            /* Append the element to target or to body */\r\n            if (this.attach !== null) {\r\n                this.app = document.querySelector(this.attach).appendChild(el.firstChild);\r\n            } else {\r\n                this.app = document.body.appendChild(el.firstChild);\r\n            }\r\n        } else {\r\n            return;\r\n        }\r\n        /* Handles CSS inserting and scoping */\r\n        if (this.style !== null) {\r\n            if (this.scoped) {\r\n                /* Quickly add style which is disabled, rename it and remove it */\r\n                let style = this.addStyle(this.style, true)\r\n                let rules = this.listify(style.sheet.cssRules);\r\n                var scopedStyle = \"\";\r\n                /* Iterate over CSS rules */\r\n                rules.forEach(rule => {\r\n                    /* Check rule is instances of CSSStyleRule */\r\n                    if (rule instanceof CSSStyleRule) {\r\n                        scopedStyle = scopedStyle + this.generateScopedRule(rule);\r\n                    }\r\n                    /* Rule is media query */\r\n                    if (rule instanceof CSSMediaRule) {\r\n                        scopedStyle = scopedStyle + `@media ${rule.conditionText} {`\r\n                        this.listify(rule.cssRules).forEach(rule => {\r\n                            scopedStyle = scopedStyle + this.generateScopedRule(rule);\r\n                        });\r\n                        scopedStyle = scopedStyle + `}`;\r\n                    }\r\n                });\r\n                /* Append scoped style */\r\n                this.addStyle(scopedStyle);\r\n                /* Remove original style */\r\n                style.parentNode.removeChild(style);\r\n            } else {\r\n                /* Append style with global scope */\r\n                this.addStyle(this.style);\r\n            }\r\n        }\r\n    }\r\n\r\n    /* Initial binding of input models */\r\n    bindModels() {\r\n        let selector = [\"email\", \"number\", \"search\", \"tel\", \"text\", \"url\", \"checkbox\", \"radio\"].map(input => {\r\n            return `input[type=\"${input}\"][exp-model]`;\r\n        });\r\n        selector = selector.concat([\"textarea[exp-model]\", \"select[exp-model]\"]);\r\n        /* Find all input elements */\r\n        var inputs = this.select(selector.join());\r\n        inputs.forEach(input => {\r\n            const model = input.getAttribute(\"exp-model\");\r\n            const type = input.getAttribute(\"type\");\r\n            /* Handle different input types */\r\n            if (type === \"checkbox\") {\r\n                input.addEventListener(\"change\", event => {\r\n                    this.model[model] = event.target.checked;\r\n                });\r\n            } else if (type === \"radio\") {\r\n                input.addEventListener(\"change\", event => {\r\n                    this.model[model] = event.target.value;\r\n                });\r\n            } else {\r\n                input.addEventListener(\"input\", event => {\r\n                    this.model[model] = event.target.value;\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Initial bindings of methods */\r\n    bindMethods(template = undefined) {\r\n        var self = this;\r\n        let supportedEvents = [\"click\", \"submit\", \"input\", \"hover\", \"blur\", \"focus\", \"mouseenter\", \"mouseleave\"];\r\n        let selector = supportedEvents.map(event => {\r\n            return `*[exp-${event}]`;\r\n        });\r\n        var events = this.select(selector.join(), template);\r\n        events.forEach(el => {\r\n            supportedEvents.forEach(event => {\r\n                var method = el.getAttribute('exp-' + event);\r\n                if (method === null || !(method in self.methods)) return;\r\n                /* If exp-action is declared then add appropriate EventListener */\r\n                el.addEventListener(event, function(e) {\r\n                    self.methods[method].apply(self.model, [e]);\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    /* Binds DOM object attribute values with model */\r\n    bindAttributes() {\r\n        const self = this;\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\"];\r\n        let selector = supportedAttributes.map(attr => {\r\n            return `*[exp-${attr}]`;\r\n        });\r\n        const elements = this.select(selector.join());\r\n        elements.forEach(el => {\r\n            supportedAttributes.forEach(attr => {\r\n                var val = el.getAttribute('exp-' + attr);\r\n                if (val === null || !(val in self.model)) return;\r\n                /* Update value according to data in model */\r\n                el.setAttribute(attr, self.model[val]);\r\n            })\r\n        })\r\n    }\r\n\r\n    /* Binds the close button with tracking and deleting functionality */\r\n    bindClose() {\r\n        let selector = `[exp-close]`;\r\n        var elements = this.select(selector);\r\n        elements.forEach(el => {\r\n            el.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                this.removeBanner();\r\n                /* Track 'close' if tracking is set to true */\r\n                if (this.tracking && this.sdk !== null && this.context !== null) {\r\n                    this.sdk.track('banner', this.getEventProperties('close'));\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    /* Bind exp-ifs */ \r\n    bindIfs() {\r\n        const expIfs = this.select(`[exp-if]`);\r\n        expIfs.forEach(el => {\r\n            /* BUG: does not check the original display value, assumes block */\r\n            const attr = el.getAttribute(\"exp-if\");\r\n            if (this.model[attr] !== null && this.model[attr] !== undefined) {\r\n                el.style.display = (this.model[attr] ? \"block\" : \"none\");\r\n            } else {\r\n                throw `exp-if attribute ${attr} is not defined in model.`\r\n                this.model[attr] = null;\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Creates access to elements from model scope */\r\n    bindRefs() {\r\n        let selecor = `[exp-ref]`;\r\n        var elements = this.select(selecor);\r\n        elements.forEach(el => {\r\n            let val = el.getAttribute('exp-ref');\r\n            if (val && val !== '') {\r\n                this.model.$refs[val] = el\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Instantiates and binds exp-for with model */\r\n    bindFors() {\r\n        const expFors = this.select(`[exp-for], [exp-rcm]`);\r\n        expFors.forEach(expFor => {\r\n            /* Tokenize and parse attribute */\r\n            let attr = expFor.hasAttribute('exp-for') ? 'exp-for' : 'exp-rcm';\r\n            let key = expFor.getAttribute(attr).split(' ')[0];\r\n            let arrayName = expFor.getAttribute(attr).split(' ')[2];\r\n            let hash = 'e-' + this.getUuid();\r\n            let template = expFor.cloneNode(true);\r\n            /* Delete exp-for attribute */\r\n            template.removeAttribute(\"exp-for\");\r\n            /* Copy template into storage, with the root element */\r\n            if (arrayName in this.__storage.loopDefinitions) {\r\n                this.__storage.loopDefinitions[arrayName].push({\r\n                    template: template,\r\n                    parentElement: expFor.parentNode,\r\n                    siblingElement: expFor.nextElementSibling\r\n                });\r\n            } else {\r\n                this.__storage.loopDefinitions[arrayName] = [{\r\n                    template: template,\r\n                    parentElement: expFor.parentNode,\r\n                    siblingElement: expFor.nextElementSibling\r\n                }];\r\n            };\r\n            /* Remove all children elements */\r\n            expFor.remove();\r\n            /* Check if array exists in model and render multiple templates */\r\n            if (this.model[arrayName]) {\r\n                this.model[arrayName].forEach(item => {\r\n                    this.renderNewElement(arrayName, key, item);\r\n                });\r\n            } else {\r\n                this.model[arrayName] = [];\r\n            }\r\n            /* Override the push method of array in the model for reactivity */\r\n            this.overridePush(this.model[arrayName], arrayName, key);\r\n        });\r\n    }\r\n\r\n    /* Method for updating all exp-binds */\r\n    updateBindings(key, value) {\r\n        const bindings = this.select(`*[exp-bind=\"${key}\"]`);\r\n        bindings.forEach(el => {\r\n            el.textContent = value;\r\n        });\r\n    }\r\n\r\n    /* Method for updating input exp-models */\r\n    updateModels(key, value) {\r\n        const modelBindings = this.select(`*[exp-model=\"${key}\"]`);\r\n        modelBindings.forEach(input => {\r\n            const model = input.getAttribute(\"exp-model\");\r\n            const type = input.getAttribute(\"type\");\r\n            /* Handle different input types */\r\n            if (type == \"checkbox\") {\r\n                input.checked = !!value;\r\n            } else if (type == \"radio\") {\r\n                if (input.value == value) input.checked = true;\r\n            } else {\r\n                input.value = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Method for updating exp-ifs */ \r\n    updateIfs(key, value) {\r\n        const expIfs = this.select(`*[exp-if=\"${key}\"]`);\r\n        expIfs.forEach(el => {\r\n            /* BUG: does not check the original display value, assumes block */\r\n            el.style.display = (value ? \"block\" : \"none\");\r\n        });\r\n    }\r\n\r\n    /* Method for updating attributes */\r\n    updateAttributes(key, value) {\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\"];\r\n        let selector = supportedAttributes.map(attr => {\r\n            return `*[exp-${attr}=\"${key}\"]`;\r\n        });\r\n        const that = this;\r\n        const elements = this.select(selector.join());\r\n\r\n        elements.forEach(el => {\r\n            supportedAttributes.forEach(attr => {\r\n                var val = el.getAttribute('exp-' + attr);\r\n                if (val === null || !(val in that.model)) return;\r\n                \r\n                el[attr] = that.model[val];\r\n            })\r\n        });\r\n    }\r\n\r\n\r\n    /* Renders a new element of an array */\r\n    renderNewElement(arrayName, key, item) {\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\"];\r\n        /* Iterate through all exp-for instances linked to targeted array */\r\n        for (expForInstance of this.__storage.loopDefinitions[arrayName]) {\r\n            /* Clone the template and populate it with element data */\r\n            var template = expForInstance.template.cloneNode(true);\r\n            let attrSelector = supportedAttributes.map(attr => {\r\n                return `*[exp-${attr}]`;\r\n            });\r\n            const expAttrs = this.select(attrSelector.join(), template);\r\n            const expBinds = this.select(`[exp-bind]`, template);\r\n            /* Override attributes of the node */\r\n            expAttrs.forEach(el => {\r\n                supportedAttributes.forEach(attr => {\r\n                    const val = el.getAttribute('exp-' + attr);\r\n                    if (val === null) return;\r\n                    if (val.indexOf('.') == -1) {\r\n                        el[attr] = item;\r\n                    } else {\r\n                        const keys = val.split('.');\r\n                        const value = this.findLastField(keys.slice(1), item);\r\n                        el[attr] = value;\r\n                    };\r\n                });\r\n            });\r\n            /* Override inner value of the node */\r\n            expBinds.forEach(el => {\r\n                const val = el.getAttribute('exp-bind');\r\n                if (val.indexOf('.') == -1) {\r\n                    el.textContent = item;\r\n                } else {\r\n                    const keys = val.split('.');\r\n                    var value = this.findLastField(keys.slice(1), item);\r\n                    el.textContent = value\r\n                }\r\n            });\r\n            /* Append all children of the newly populated template */\r\n            expForInstance.parentElement.insertBefore(template, expForInstance.siblingElement);\r\n        }\r\n    }\r\n\r\n    /* Override the push function with reactivity functionality */\r\n    overridePush(array, arrayName, key) {\r\n        let self = this;\r\n        array.push = (_ => {\r\n            var original = Array.prototype.push;\r\n            return function() {\r\n                const ret = original.apply(this, arguments);\r\n                self.renderNewElement(arrayName, key, arguments[0]);\r\n                return ret;\r\n            };\r\n        })();\r\n    }\r\n\r\n    /* Method for inserting stylesheet */\r\n    addStyle(css, disabled = false){\r\n        if (this.app === null) return;\r\n        var style = document.createElement('style');\r\n        style.type= 'text/css';\r\n        style.appendChild(document.createTextNode(css)); /* BUG: Does not work in IE8 or less */\r\n        var inserted = this.app.appendChild(style);\r\n        inserted.sheet.disabled = disabled;\r\n        return inserted;\r\n    }\r\n\r\n    /* Method for adding unique ID to CSS selectors */\r\n    generateScopedRule(rule) {\r\n        let selectors = rule.selectorText.split(',');\r\n        let selectorsText = selectors.map(selector => {\r\n            let attr = `exp-${this.getUuid()}`;\r\n            this.addAttributes(selector.trim(), attr);\r\n            if (selector.includes(\".exponea-animate\")) {\r\n                return `${selector}[${this.bannerId}]`\r\n            }\r\n            if (this.select(selector.trim()).length > 0) {\r\n                return `${selector}[${attr}]`;\r\n            }\r\n            return  `${selector}`;\r\n        });\r\n        return `${selectorsText.join()} { ${rule.style.cssText} }`;\r\n    }\r\n\r\n    /* Handle backdrop option */\r\n    addBackdrop() {\r\n        if (this.app == null) return;\r\n        /* Set default backdrop style */\r\n        let backdropStyle = { \r\n            \"position\": \"fixed\",\r\n            \"top\": \"0\",\r\n            \"left\": \"0\",\r\n            \"width\": \"100vw\",\r\n            \"height\": \"100vh\",\r\n            \"z-index\": \"9999\",\r\n            \"background\": \"rgba(0,0,0,0.7)\"\r\n        }\r\n        /* Customize backdrop. If style=true then iterates over an empty array */\r\n        for (var key of Object.keys(this.backdrop)) {\r\n            backdropStyle[key] = this.backdrop[key];\r\n        }\r\n        /* Inject element into DOM */\r\n        let backdrop = document.createElement('div');\r\n        this.setStyleFromObject(backdropStyle, backdrop);\r\n        this.app.parentNode.style['position'] = \"relative\";\r\n        this.app.style[\"z-index\"] = \"9999999\";\r\n        this.backdrop = this.app.parentNode.appendChild(backdrop);\r\n        /* Add event listener which removes banner on click */\r\n        this.backdrop.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            this.removeBanner();\r\n        })\r\n    }\r\n\r\n    /* Adds Powered by Exponea branding */\r\n    addBranding() {\r\n        if (this.app === null) return;\r\n        var branding = document.createElement('object');\r\n        var uuid = this.getUuid();\r\n        this.app.appendChild(branding);\r\n        branding.innerHTML = '<a href=\"https://exponea.com/?utm_campaign=exponea-web-layer&amp;utm_medium=banner&amp;utm_source=referral\" e' + uuid + ' target=\"_blank\">Powered by Exponea</a>';\r\n        this.addStyle('[e' + uuid + ']{font-size:11px;position:absolute;color:' + this.branded + ';opacity:.6;right:5px;bottom:5px;padding-top:0;text-decoration:none}[e' + uuid + ']:hover{opacity:.9}');\r\n    }\r\n\r\n    /* Adds exponea-animate class which is responsible for smooth transitions */\r\n    addAnimationClass(className = \"exponea-animate\") {\r\n        if (this.app === null) return;\r\n        if (this.app.classList) {\r\n            this.app.setAttribute(this.bannerId, '');\r\n            this.app.classList.add(className);\r\n        } else {\r\n            this.app.className += ' ' + className;\r\n        }\r\n    }\r\n\r\n    /* Loads Exponea recommendation and inserts into model */\r\n    loadRecommendations() {\r\n        Object.keys(this.recommendations).forEach((rcm) => {\r\n            /* Has to already exist due to exp-for initialization */\r\n            if (this.model[rcm]) {\r\n                /* Option parameters according to Exponea JS SDK */\r\n                var options = {\r\n                    recommendationId: this.recommendations[rcm].id,\r\n                    size: this.recommendations[rcm].total,\r\n                    callback: data => {\r\n                        /* Push to model */\r\n                        if (data && data.length > 0) {\r\n                            data.forEach(item => {\r\n                                this.model[rcm].push(item)\r\n                            })\r\n                        }\r\n                        /* Update loading key */\r\n                        if (this.recommendations[rcm].loadingKey !== undefined) {\r\n                            this.model[this.recommendations[rcm].loadingKey] = true;\r\n                        }\r\n                    },\r\n                    fillWithRandom: true\r\n                };\r\n                /* Generate recommendation */\r\n                if (this.sdk && this.sdk.getRecommendation) {\r\n                    this.sdk.getRecommendation(options);\r\n                } else {\r\n                    if (this.recommendations[rcm].loadingKey !== undefined) {\r\n                        this.model[this.recommendations[rcm].loadingKey] = true;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /* Remove banner */\r\n    removeBanner() {\r\n        if (this.app === null) return\r\n        this.app.parentNode.removeChild(this.app);\r\n        if (this.backdrop !== null) this.backdrop.parentNode.removeChild(this.backdrop);\r\n    }\r\n\r\n    /**\r\n     * Helper functions\r\n     */\r\n\r\n    /* Return Array from DOM elements collection list */\r\n    listify(list) {\r\n        return Array.prototype.slice.call(list);\r\n    }\r\n    /* Return array from querySelector */\r\n    select(selector, scope = this.app) {\r\n        if (scope === null) return []\r\n        var elements = this.listify(scope.querySelectorAll(selector));\r\n        if (scope.matches(selector)) {\r\n            elements.push(scope);\r\n        }\r\n        return elements;\r\n    }\r\n    /* Helper method for adding attribute, used by CSS scoping */\r\n    addAttributes(selector, attr, val = \"\") {\r\n        this.select(selector).forEach(el => {\r\n            el.setAttribute(attr, val);\r\n        })\r\n    }\r\n    /* Helper method for generating unique IDs, used by CSS scoping */\r\n    getUuid() {\r\n        var firstPart = (Math.random() * 46656) | 0;\r\n        var secondPart = (Math.random() * 46656) | 0;\r\n        firstPart = (\"000\" + firstPart.toString(36)).slice(-3);\r\n        secondPart = (\"000\" + secondPart.toString(36)).slice(-3);\r\n        return firstPart + secondPart;\r\n    }\r\n    /* Add inline style to element */\r\n    setStyleFromObject(object, el) {\r\n        for (var property in object) {\r\n            el.style[property] = object[property];\r\n        }\r\n    }\r\n    /* Helper method for creating event attributes for tracking */\r\n    getEventProperties(action, interactive) {\r\n        if (this.context === null) return;\r\n        return { \r\n            action: action,\r\n            banner_id: this.context.banner_id,\r\n            banner_name: this.context.banner_name,\r\n            banner_type: this.context.banner_type,\r\n            variant_id: this.context.variant_id,\r\n            variant_name: this.context.variant_name,\r\n            interaction: interactive !== false ? true : false,\r\n            location: window.location.href,\r\n            path: window.location.pathname\r\n        };\r\n    }\r\n    /* Helper method for finding nested fields in nested dictionaries */\r\n    findLastField(items, dict) {\r\n        if (items.length == 1) return dict[items[0]];\r\n        else return rec(items.slice(1), dict[items[0]]);\r\n    }\r\n}\r\n\r\nwindow.Exp = Exp;\r\n"]}
<<<<<<< HEAD
{"version":3,"sources":["helpers\\anim.js","helpers\\validateEmail.js","Exp.js"],"names":["anim","A","n","g","t","e","a","o","c","q","cb","i","shift","apply","setTimeout","charAt","document","getElementById","push","expand","padding","margin","border","T","R","B","L","borderRadius","mutex","to","defs","iter","slice","call","arguments","dim","dir","d","replace","fr","timeout","w","window","s","style","getComputedStyle","currentStyle","u","exec","fn","test","fx","color","_","mx","mxv","p","z","Date","getTime","parseFloat","width","_fr","isNaN","clientWidth","clientHeight","opacity","zoom","filter","Math","round","v","ok","toRGBA","concat","rgbaIE","pop","length","join","height","RGBA","b","f","h","l","m","x","y","parseInt","module","exports","validateEmail","email","re","Exp","settings","el","attach","data","methods","filters","model","app","bannerId","getUuid","recommendations","scoped","mounted","backdrop","branded","undefined","html","context","sdk","inPreview","__storage","loopDefinitions","initializedLoops","tracking","trigger","type","delay","self","addEventListener","inject","__exp_triggered","body","offsetY","scrollY","action","element","loaded","render","initializeModel","bindModels","bindMethods","bindAttributes","bindClose","bindFors","bindIfs","loadRecommendations","addBackdrop","addBranding","addAnimationClass","track","getEventProperties","control_group","Object","keys","forEach","value","key","defineProperty","enumerable","get","set","val","updateBindings","updateModels","updateIfs","updateAttributes","$anim","require","$validateEmail","removeBanner","bind","querySelector","createElement","innerHTML","trim","appendChild","firstChild","addStyle","rules","listify","sheet","cssRules","scopedStyle","rule","CSSStyleRule","generateScopedRule","CSSMediaRule","conditionText","parentNode","removeChild","selector","map","input","inputs","select","getAttribute","event","target","checked","template","supportedEvents","events","method","supportedAttributes","attr","elements","setAttribute","stopPropagation","preventDefault","expIfs","display","selecor","$refs","expFors","expFor","hasAttribute","split","arrayName","hash","cloneNode","removeAttribute","sibling","nextElementSibling","parentElement","siblingElement","remove","renderNewElement","item","overridePush","parsedAttributes","intermediateValue","textContent","bindings","writeBindValue","modelBindings","that","expForInstance","attrSelector","expAttrs","expBinds","indexOf","findLastField","insertBefore","array","original","Array","prototype","ret","css","disabled","createTextNode","inserted","selectors","selectorText","selectorsText","addAttributes","includes","cssText","backdropStyle","setStyleFromObject","branding","uuid","className","classList","add","rcm","options","recommendationId","id","size","total","callback","loadingKey","fillWithRandom","getRecommendation","list","scope","querySelectorAll","matches","firstPart","random","secondPart","toString","object","property","interactive","banner_id","banner_name","banner_type","variant_id","variant_name","interaction","location","href","path","pathname","items","dict","rec"],"mappings":"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","file":"Exp.map","sourcesContent":["/** Copyright 2013 mocking@gmail.com * http://github.com/relay-zz/anim\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n   http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License. */\r\n\r\nvar anim = function(A) {\r\n    \"use strict\";\r\n    \r\n    A = function(n, g, t, e) {\r\n      var a, o, c,\r\n        q = [],\r\n        cb = function(i) {\r\n          //our internal callback function maintains a queue of objects \r\n          //that contain callback info. If the object is an array of length\r\n          //over 2, then it is parameters for the next animation. If the object\r\n          //is an array of length 1 and the item in the array is a number,\r\n          //then it is a timeout period, otherwise it is a callback function.\r\n          if(i = q.shift()) i[1] ?\r\n              A.apply(this, i).anim(cb) :\r\n              i[0] > 0 ? setTimeout(cb, i[0]*1000) : (i[0](), cb())\r\n        };\r\n    \r\n      if(n.charAt) n = document.getElementById(n);\r\n    \r\n      //if the 1st param is a number then treat it as a timeout period.\r\n      //If the node reference is null, then we skip it and run the next callback\r\n      //so that we can continue with the animation without throwing an error.\r\n      if(n > 0 || !n) g = {}, t = 0, cb(q = [].push([n || 0]));\r\n    \r\n      //firefox don't allow reading shorthand CSS styles like \"margin\" so\r\n      //we have to expand them to be \"margin-left\", \"margin-top\", etc.\r\n      //Also, expanding them allows the 4 values to animate independently \r\n      //in the case that the 4 values are different to begin with.\r\n      expand(g, {padding:0, margin:0, border:\"Width\"}, [T, R, B, L]);\r\n      expand(g, {borderRadius:\"Radius\"}, [T+L, T+R, B+R, B+L]);\r\n    \r\n      //if we animate a property of a node, we set a unique number on the\r\n      //node, so that if we run another animation concurrently, it will halt\r\n      //the first animation. This is needed so that if we animate on mouseover\r\n      //and want to reverse the animation on mouseout before the mouseover\r\n      //is complete, they won't clash and the last animation prevails.\r\n      ++mutex;\r\n    \r\n      for(a in g) {\r\n        o = g[a];\r\n        if(!o.to && o.to !== 0) o = g[a] = {to: o};  //shorthand {margin:0} => {margin:{to:0}}\r\n    \r\n        A.defs(o, n, a, e);  //set defaults, get initial values, selects animation fx\r\n      }\r\n    \r\n      A.iter(g, t*1000, cb);\r\n    \r\n      return {\r\n        //this allows us to queue multiple animations together in compact syntax\r\n        anim: function() {\r\n          q.push([].slice.call(arguments));\r\n          return this\r\n        }\r\n      }\r\n    };\r\n    \r\n    var T=\"Top\", R=\"Right\", B=\"Bottom\", L=\"Left\",\r\n      mutex = 1,\r\n    \r\n      //{border:1} => {borderTop:1, borderRight:1, borderBottom:1, borderLeft:1}\r\n      expand = function(g, dim, dir, a, i, d, o) {\r\n        for(a in g) {  //for each animation property\r\n          if(a in dim) {\r\n            o = g[a];\r\n            for(i = 0; d = dir[i]; i++)  //for each dimension (Top, Right, etc.)\r\n              //margin => marginTop\r\n              //borderWidth => borderTopWidth\r\n              //borderRadius => borderTopRadius\r\n              g[a.replace(dim[a], \"\") + d + (dim[a] || \"\")] = {\r\n                to:(o.to === 0) ? o.to : (o.to || o), fr:o.fr, e:o.e\r\n              };\r\n            delete g[a];\r\n          }\r\n        }\r\n      },\r\n    \r\n      timeout = function(w, a) {\r\n        return w[\"r\"+a] || w[\"webkitR\"+a] || w[\"mozR\"+a] || w[\"msR\"+a] || w[\"oR\"+a]\r\n      }(window, \"equestAnimationFrame\");\r\n    \r\n    A.defs = function(o, n, a, e, s) {\r\n      s = n.style;\r\n      o.a = a;  //attribute\r\n      o.n = n;  //node\r\n      o.s = (a in s) ? s : n;  //= n.style || n\r\n      o.e = o.e || e;  //easing\r\n    \r\n      o.fr = o.fr || (o.fr === 0 ? 0 : o.s == n ? n[a] :\r\n            (window.getComputedStyle ? getComputedStyle(n, null) : n.currentStyle)[a]);\r\n    \r\n      o.u = (/\\d(\\D+)$/.exec(o.to) || /\\d(\\D+)$/.exec(o.fr) || [0, 0])[1];  //units (px, %)\r\n    \r\n      //which animation fx to use. Only color needs special treatment.\r\n      o.fn = /color/i.test(a) ? A.fx.color : (A.fx[a] || A.fx._);\r\n    \r\n      //the mutex is composed of the animating property name and a unique number\r\n      o.mx = \"anim_\" + a;\r\n      n[o.mx] = o.mxv = mutex;\r\n      if(n[o.mx] != o.mxv) o.mxv = null;  //test expando\r\n    };\r\n    \r\n    A.iter = function(g, t, cb) {\r\n      var _, i, o, p, e,\r\n        z = +new Date + t,\r\n    \r\n      _ = function() {\r\n        i = z - new Date().getTime();\r\n    \r\n        if(i < 50) {\r\n          for(o in g)\r\n            o = g[o],\r\n            o.p = 1,\r\n            o.fn(o, o.n, o.to, o.fr, o.a, o.e);\r\n    \r\n          cb && cb()\r\n    \r\n        } else {\r\n    \r\n          i = i/t;\r\n    \r\n          for(o in g) {\r\n            o = g[o];\r\n    \r\n            if(o.n[o.mx] != o.mxv) return;  //if mutex not match then halt.\r\n    \r\n            e = o.e;\r\n            p = i;\r\n    \r\n            if(e == \"lin\") {\r\n              p = 1 - p\r\n      \r\n            } else if(e == \"ease\") {\r\n              p = (0.5 - p)*2;\r\n              p = 1 - ((p*p*p - p*3) + 2)/4\r\n      \r\n            } else if(e == \"ease-in\") {\r\n              p = 1 - p;\r\n              p = p*p*p\r\n      \r\n            } else {  //ease-out\r\n              p = 1 - p*p*p\r\n            }\r\n            o.p = p;\r\n            o.fn(o, o.n, o.to, o.fr, o.a, o.e)\r\n          }\r\n          timeout ? timeout(_) : setTimeout(_, 20)\r\n        }\r\n      }\r\n      _();\r\n    };\r\n    \r\n    A.fx = {  //CSS names which need special handling\r\n    \r\n      _: function(o, n, to, fr, a, e) {  //for generic fx\r\n        fr = parseFloat(fr) || 0,\r\n        to = parseFloat(to) || 0,\r\n        o.s[a] = (o.p >= 1 ? to : (o.p*(to - fr) + fr)) + o.u\r\n      },\r\n    \r\n      width: function(o, n, to, fr, a, e) {  //for width/height fx\r\n        if(!(o._fr >= 0))\r\n          o._fr = !isNaN(fr = parseFloat(fr)) ? fr : a == \"width\" ? n.clientWidth : n.clientHeight;\r\n        A.fx._(o, n, to, o._fr, a, e)\r\n      },\r\n    \r\n      opacity: function(o, n, to, fr, a, e) {\r\n        if(isNaN(fr = fr || o._fr))\r\n          fr = n.style,\r\n          fr.zoom = 1,\r\n          fr = o._fr = (/alpha\\(opacity=(\\d+)\\b/i.exec(fr.filter) || {})[1]/100 || 1;\r\n        fr *= 1;\r\n        to = (o.p*(to - fr) + fr);\r\n        n = n.style;\r\n        if(a in n) {\r\n          n[a] = to\r\n        } else {\r\n          n.filter = to >= 1 ? \"\" : \"alpha(\" + a + \"=\" + Math.round(to*100) + \")\"\r\n        }\r\n      },\r\n    \r\n      color: function(o, n, to, fr, a, e, i, v) {\r\n        if(!o.ok) {\r\n          to = o.to = A.toRGBA(to);\r\n          fr = o.fr = A.toRGBA(fr);\r\n          if(to[3] == 0) to = [].concat(fr), to[3] = 0;\r\n          if(fr[3] == 0) fr = [].concat(to), fr[3] = 0;\r\n          o.ok = 1\r\n        }\r\n    \r\n        v = [0, 0, 0, o.p*(to[3] - fr[3]) + 1*fr[3]];\r\n        for(i=2; i>=0; i--) v[i] = Math.round(o.p*(to[i] - fr[i]) + 1*fr[i]);\r\n    \r\n        if(v[3] >= 1 || A.rgbaIE) v.pop();\r\n    \r\n        try {\r\n          o.s[a] = (v.length > 3 ? \"rgba(\" : \"rgb(\") + v.join(\",\") + \")\"\r\n        } catch(e) {\r\n          A.rgbaIE = 1\r\n        }\r\n      }\r\n    };\r\n    A.fx.height = A.fx.width;\r\n    \r\n    A.RGBA = /#(.)(.)(.)\\b|#(..)(..)(..)\\b|(\\d+)%,(\\d+)%,(\\d+)%(?:,([\\d\\.]+))?|(\\d+),(\\d+),(\\d+)(?:,([\\d\\.]+))?\\b/;\r\n    A.toRGBA = function(s, v) {\r\n      v = [0, 0, 0, 0];\r\n      s.replace(/\\s/g, \"\").replace(A.RGBA, function(i, a,b,c, f,g,h, l,m,n,o, w,x,y,z) {\r\n        var h = [a+a||f, b+b||g, c+c||h], p = [l, m, n];\r\n    \r\n        for(i=0; i<3; i++) h[i] = parseInt(h[i], 16), p[i] = Math.round(p[i]*2.55);\r\n    \r\n        v = [h[0]||p[0]||w||0,  h[1]||p[1]||x||0,  h[2]||p[2]||y||0,  o||z||1]\r\n      });\r\n      return v\r\n    };\r\n    \r\n    return A\r\n}();\r\n\r\nmodule.exports = anim;","/**\r\n * \r\n * @param {string} email \r\n * @returns {bool}\r\n */\r\nfunction validateEmail(email) {\r\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n}\r\n\r\nmodule.exports = validateEmail;","/* Main class */\r\nclass Exp {\r\n    constructor(settings) {\r\n        /* Find DOM element which contains Exp code */\r\n        this.el = settings.el || null;\r\n        /* Find DOM element to which append HTML code */\r\n        this.attach = settings.attach || null;\r\n\r\n        /* Initializing data model */\r\n        this.data = settings.data || {};\r\n        /* Controller methods */\r\n        this.methods = settings.methods || {};\r\n        /* Filters */\r\n        this.filters = settings.filters || {};\r\n        /* Initializing model */\r\n        this.model = {};\r\n\r\n        /* Initialization of Exp app */\r\n        this.app = null;\r\n\r\n        /* Generate Id for banner */\r\n        this.bannerId = 'e-' + this.getUuid();\r\n        /* Dictionaries describing recommendations */\r\n        this.recommendations = settings.recommendations || {};\r\n\r\n        /* Scoping CSS rules locally for banner */\r\n        this.scoped = settings.scoped || false;\r\n        /* Function triggered after rendering the banner */\r\n        this.mounted = settings.mounted || null;\r\n        /* Backdrop in front of which Exp app will be rendered */\r\n        this.backdrop = settings.backdrop || null;\r\n        /* Adding Exponea branding options, by default black */\r\n        if (settings.branded === undefined || settings.branded === null || (settings.branded && settings.branded !== \"black\" && settings.branded !== \"white\")) {\r\n            this.branded = \"black\";\r\n        } else {\r\n            this.branded = settings.branded;\r\n        }\r\n\r\n        /* Look for either explicit code or for HTML code in context */\r\n        this.html = (_ => {\r\n            if (settings.html !== undefined) return settings.html;\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.html !== undefined) return settings.context.html;\r\n            }\r\n            return null;\r\n        })();\r\n        /* Look for either explicit code or for CSS code in context */\r\n        this.style = (_ => {\r\n            if (settings.style !== undefined) return settings.style;\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.style !== undefined) return settings.context.style;\r\n            }\r\n            return null;\r\n        })();\r\n        /* Exponea SDK passed through context attribute when using production banners */\r\n        this.sdk = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.sdk !== undefined) return settings.context.sdk;\r\n            }\r\n\r\n            return null;\r\n        })();\r\n        /* Exponea banner context */\r\n        this.context = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.data !== undefined) return settings.context.data;\r\n            }\r\n\r\n            return null;\r\n        })();\r\n        /* Check whether banner is in Exponea editor or not */\r\n        this.inPreview = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.inPreview !== undefined) return settings.context.inPreview;\r\n            }\r\n\r\n            return false;\r\n        })();\r\n\r\n        /* Internal storage */\r\n        this.__storage = {\r\n            loopDefinitions: {},\r\n            initializedLoops: {}\r\n        };\r\n\r\n        /* Tracking by default true. Tracks show/close automatically. */\r\n        if (settings.tracking === undefined) {\r\n            this.tracking = true;\r\n        } else {\r\n            this.tracking = settings.tracking;\r\n        }\r\n        /* Setting trigger for banner display */\r\n        this.trigger = settings.trigger || null;\r\n        \r\n        /* If trigger exists, inject into DOM based on the type of the trigger */\r\n        if (this.trigger !== null && !this.inPreview) {\r\n            if (this.trigger.type == \"onready\") {\r\n                /* Renders banner once page elements are loaded */\r\n                const delay = this.trigger.delay || 0;\r\n                var self = this;\r\n                window.addEventListener('load', function() {\r\n                    setTimeout(() => {\r\n                        self.inject();\r\n                    }, delay);\r\n                });\r\n                return;\r\n            } else if (this.trigger.type == \"onexit\") {\r\n                /* Renders banner if user wants to leave the page */\r\n                const delay = this.trigger.delay || 0;\r\n                window.__exp_triggered = false;\r\n                var self = this;\r\n                document.body.addEventListener(\"mouseleave\", function (e) {\r\n                    /* Check window was left */\r\n                    if (e.offsetY - window.scrollY < 0 && !window.__exp_triggered) {\r\n                        window.__exp_triggered = true;\r\n                        setTimeout(() => {\r\n                            self.inject(self);\r\n                        }, delay);\r\n                    }\r\n                });\r\n                return;\r\n            } else if (this.trigger.type = \"onaction\") {\r\n                /* Renders banner on specific user action */\r\n                var self = this;\r\n                var action = this.trigger.action || \"click\";\r\n                const delay = this.trigger.delay || 0;\r\n                if (this.trigger.element) {\r\n                    this.trigger.element.addEventListener(action, function() {\r\n                        setTimeout(() => {\r\n                            self.inject(self);\r\n                        }, delay);\r\n                    });\r\n                }\r\n                return;\r\n            } else {\r\n                /* If incorrect type of trigger is given do not render at all */\r\n                throw `Incorrect trigger type ${ this.trigger.type }`;\r\n            }\r\n        }\r\n        /* If no trigger type inject normally */\r\n        return this.inject();\r\n    }\r\n\r\n    /* Method for injecting the banner into DOM */\r\n    inject() {\r\n        /* For control group do not inject and only track show */\r\n        if (false) { /* TODO: How to check control_group from context */\r\n            this.loaded();\r\n        }\r\n\r\n        /* Render Exp banner */\r\n        this.render();\r\n\r\n        /* Initialize model */\r\n        this.initializeModel(this.data);\r\n\r\n        /* Create the main tunnel of bindings between HTML with JS */\r\n        this.bindModels();\r\n        this.bindMethods();\r\n        this.bindAttributes();\r\n        this.bindClose();\r\n        this.bindFors();\r\n        this.bindIfs()\r\n\r\n        /* Load recommendations */\r\n        this.loadRecommendations()\r\n\r\n        /* Renders optional objects alongside with banners */\r\n        if (this.backdrop !== null) this.addBackdrop();\r\n        if (this.branded !== false) this.addBranding();\r\n        /* Adds exponea-animate class to app */\r\n        this.addAnimationClass();\r\n\r\n        /* Track show if tracking is set to true  */\r\n        if (this.tracking && this.sdk !== null && this.context !== null) {\r\n            this.sdk.track('banner', this.getEventProperties('show', false));\r\n        }\r\n\r\n        /* Call mounted function if set */\r\n        if (this.mounted !== null && !this.control_group) this.mounted.call(this.model);\r\n\r\n        return this.model;\r\n    }\r\n\r\n    /* Initalize model from data */\r\n    initializeModel(data) {\r\n        var self = this;\r\n        Object.keys(data).forEach(key => {\r\n            var value = data[key];\r\n            /* Define new setters to update model on change */\r\n            Object.defineProperty(self.model, key, {\r\n                enumerable: true,\r\n                get() {\r\n                    return value;\r\n                },\r\n                set(val) {\r\n                    value = val;\r\n                    self.updateBindings(key, value);\r\n                    self.updateModels(key, value);\r\n                    self.updateIfs(key, value);\r\n                    self.updateAttributes(key, value);\r\n                }\r\n            });\r\n            self.model[key] = value;\r\n        });\r\n\r\n        /* Copy methods from this.methods to this.model scope so it can be accessed with `this` */\r\n        if (this.methods !== null) {\r\n            for (var key of Object.keys(this.methods)) {\r\n                this.model[key] = this.methods[key];\r\n            }\r\n        }\r\n\r\n        /* Bind helper methods */\r\n        this.model.$anim = require('./helpers/anim.js');\r\n        this.model.$validateEmail = require('./helpers/validateEmail.js');\r\n\r\n        /* Bind special methods to be used in `this` scope */\r\n        this.model.removeBanner = this.removeBanner.bind(this, this.app);\r\n        this.model.sdk = this.sdk;\r\n    }\r\n\r\n    /* Render Exp banner by injecting it into DOM and adding style */\r\n    render() {\r\n        /* Use el to find element over which to mask Exp */\r\n        if (this.el !== null) {\r\n            this.app = document.querySelector(this.el);\r\n        /* Otherwise check for HTML code which would be created and injected into DOM */\r\n        } else if (this.html !== null) {\r\n            /* Insert HTML to page */\r\n            let el = document.createElement('div');\r\n            el.innerHTML = this.html.trim();\r\n            /* Append the element to target or to body */\r\n            if (this.attach !== null) {\r\n                this.app = document.querySelector(this.attach).appendChild(el.firstChild);\r\n            } else {\r\n                this.app = document.body.appendChild(el.firstChild);\r\n            }\r\n        } else {\r\n            return;\r\n        }\r\n        /* Handles CSS inserting and scoping */\r\n        if (this.style !== null) {\r\n            if (this.scoped) {\r\n                /* Quickly add style which is disabled, rename it and remove it */\r\n                let style = this.addStyle(this.style, true)\r\n                let rules = this.listify(style.sheet.cssRules);\r\n                var scopedStyle = \"\";\r\n                /* Iterate over CSS rules */\r\n                rules.forEach(rule => {\r\n                    /* Check rule is instances of CSSStyleRule */\r\n                    if (rule instanceof CSSStyleRule) {\r\n                        scopedStyle = scopedStyle + this.generateScopedRule(rule);\r\n                    }\r\n                    /* Rule is media query */\r\n                    if (rule instanceof CSSMediaRule) {\r\n                        scopedStyle = scopedStyle + `@media ${rule.conditionText} {`\r\n                        this.listify(rule.cssRules).forEach(rule => {\r\n                            scopedStyle = scopedStyle + this.generateScopedRule(rule);\r\n                        });\r\n                        scopedStyle = scopedStyle + `}`;\r\n                    }\r\n                });\r\n                /* Append scoped style */\r\n                this.addStyle(scopedStyle);\r\n                /* Remove original style */\r\n                style.parentNode.removeChild(style);\r\n            } else {\r\n                /* Append style with global scope */\r\n                this.addStyle(this.style);\r\n            }\r\n        }\r\n    }\r\n\r\n    /* Initial binding of input models */\r\n    bindModels() {\r\n        let selector = [\"email\", \"number\", \"search\", \"tel\", \"text\", \"url\", \"checkbox\", \"radio\"].map(input => {\r\n            return `input[type=\"${input}\"][exp-model]`;\r\n        });\r\n        selector = selector.concat([\"textarea[exp-model]\", \"select[exp-model]\"]);\r\n        /* Find all input elements */\r\n        var inputs = this.select(selector.join());\r\n        inputs.forEach(input => {\r\n            const model = input.getAttribute(\"exp-model\");\r\n            const type = input.getAttribute(\"type\");\r\n            /* Handle different input types */\r\n            if (type === \"checkbox\") {\r\n                input.addEventListener(\"change\", event => {\r\n                    this.model[model] = event.target.checked;\r\n                });\r\n            } else if (type === \"radio\") {\r\n                input.addEventListener(\"change\", event => {\r\n                    this.model[model] = event.target.value;\r\n                });\r\n            } else {\r\n                input.addEventListener(\"input\", event => {\r\n                    this.model[model] = event.target.value;\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Initial bindings of methods */\r\n    bindMethods(template = undefined) {\r\n        var self = this;\r\n        let supportedEvents = [\"click\", \"submit\", \"input\", \"hover\", \"blur\", \"focus\", \"mouseenter\", \"mouseleave\", \"action\"];\r\n        let selector = supportedEvents.map(event => {\r\n            return `*[exp-${event}]`;\r\n        });\r\n        var events = this.select(selector.join(), template);\r\n        events.forEach(el => {\r\n            supportedEvents.forEach(event => {\r\n                var method = el.getAttribute('exp-' + event);\r\n                /* If exp-action is declared then add appropriate EventListener */\r\n                if (event == 'action') {\r\n                    el.addEventListener('click', function(e) {\r\n                        if (this.tracking && this.sdk !== null && this.context !== null) {\r\n                            this.sdk.track('banner', this.getEventProperties('click'));\r\n                        }\r\n                    });\r\n                }\r\n\r\n                if (method === null || !(method in self.methods)) return;\r\n                el.addEventListener(event, function(e) {\r\n                    self.methods[method].apply(self.model, [e]);\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    /* Binds DOM object attribute values with model */\r\n    bindAttributes() {\r\n        const self = this;\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\", \"title\", \"disabled\"];\r\n        let selector = supportedAttributes.map(attr => {\r\n            return `*[exp-${attr}]`;\r\n        });\r\n        const elements = this.select(selector.join());\r\n        elements.forEach(el => {\r\n            supportedAttributes.forEach(attr => {\r\n                var val = el.getAttribute('exp-' + attr);\r\n                if (val === null || !(val in self.model)) return;\r\n                /* Update value according to data in model */\r\n                el.setAttribute(attr, self.model[val]);\r\n            })\r\n        })\r\n    }\r\n\r\n    /* Binds the close button with tracking and deleting functionality */\r\n    bindClose() {\r\n        let selector = `[exp-close]`;\r\n        var elements = this.select(selector);\r\n        elements.forEach(el => {\r\n            el.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                this.removeBanner();\r\n                /* Track 'close' if tracking is set to true */\r\n                if (this.tracking && this.sdk !== null && this.context !== null) {\r\n                    this.sdk.track('banner', this.getEventProperties('close'));\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    /* Bind exp-ifs */ \r\n    bindIfs() {\r\n        const expIfs = this.select(`[exp-if]`);\r\n        expIfs.forEach(el => {\r\n            /* BUG: does not check the original display value, assumes block */\r\n            const attr = el.getAttribute(\"exp-if\");\r\n            if (this.model[attr] !== null && this.model[attr] !== undefined) {\r\n                el.style.display = (this.model[attr] ? \"block\" : \"none\");\r\n            } else {\r\n                throw `exp-if attribute ${attr} is not defined in model.`\r\n                this.model[attr] = null;\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Creates access to elements from model scope */\r\n    bindRefs() {\r\n        let selecor = `[exp-ref]`;\r\n        var elements = this.select(selecor);\r\n        elements.forEach(el => {\r\n            let val = el.getAttribute('exp-ref');\r\n            if (val && val !== '') {\r\n                this.model.$refs[val] = el\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Instantiates and binds exp-for with model */\r\n    bindFors() {\r\n        const expFors = this.select(`[exp-for], [exp-rcm]`);\r\n        expFors.forEach(expFor => {\r\n            /* Tokenize and parse attribute */\r\n            let attr = expFor.hasAttribute('exp-for') ? 'exp-for' : 'exp-rcm';\r\n            let key = expFor.getAttribute(attr).split(' ')[0];\r\n            let arrayName = expFor.getAttribute(attr).split(' ')[2];\r\n            let hash = 'e-' + this.getUuid();\r\n            let template = expFor.cloneNode(true);\r\n            /* Delete exp-for attribute */\r\n            template.removeAttribute(\"exp-for\");\r\n            /* Copy template into storage, with the root element */\r\n            if (arrayName in this.__storage.loopDefinitions) {\r\n                const sibling = (expFor.nextElementSibling !== null && expFor.nextElementSibling.getAttribute('exp-for') !== null) ? null : expFor.nextElementSibling;\r\n                this.__storage.loopDefinitions[arrayName].push({\r\n                    template: template,\r\n                    parentElement: expFor.parentNode,\r\n                    siblingElement: sibling\r\n                });\r\n            } else {\r\n                const sibling = (expFor.nextElementSibling !== null && expFor.nextElementSibling.getAttribute('exp-for') !== null) ? null : expFor.nextElementSibling;\r\n                this.__storage.loopDefinitions[arrayName] = [{\r\n                    template: template,\r\n                    parentElement: expFor.parentNode,\r\n                    siblingElement: sibling\r\n                }];\r\n            };\r\n            /* Remove all children elements */\r\n            expFor.remove();\r\n            /* Check if array exists in model and render multiple templates */\r\n            if (this.model[arrayName]) {\r\n                this.model[arrayName].forEach(item => {\r\n                    this.renderNewElement(arrayName, key, item);\r\n                });\r\n            } else {\r\n                this.model[arrayName] = [];\r\n            }\r\n            /* Override the push method of array in the model for reactivity */\r\n            this.overridePush(this.model[arrayName], arrayName, key);\r\n        });\r\n    }\r\n\r\n    writeBindValue(value, el) {\r\n        const parsedAttributes = el.getAttribute('exp-bind').split('|');\r\n        \r\n        if (parsedAttributes.length > 1) {\r\n            let intermediateValue = value;\r\n\r\n            for (let i = 1; i < parsedAttributes.length; i++) {\r\n                const filter = parsedAttributes[i].trim();\r\n\r\n                if (filter in this.filters) {\r\n                    intermediateValue = this.filters[filter].call(this.model, intermediateValue);\r\n                }\r\n            }\r\n\r\n            el.textContent = intermediateValue;\r\n        } else {\r\n            el.textContent = value;\r\n        }\r\n    }\r\n\r\n    /* Method for updating all exp-binds */\r\n    updateBindings(key, value, el = null) {\r\n        const bindings = this.select(`*[exp-bind~=\"${key}\"]`);\r\n        bindings.forEach(el => {\r\n            this.writeBindValue(value, el);\r\n        });\r\n    }\r\n\r\n    /* Method for updating input exp-models */\r\n    updateModels(key, value) {\r\n        const modelBindings = this.select(`*[exp-model=\"${key}\"]`);\r\n        modelBindings.forEach(input => {\r\n            const model = input.getAttribute(\"exp-model\");\r\n            const type = input.getAttribute(\"type\");\r\n            /* Handle different input types */\r\n            if (type == \"checkbox\") {\r\n                input.checked = !!value;\r\n            } else if (type == \"radio\") {\r\n                if (input.value == value) input.checked = true;\r\n            } else {\r\n                input.value = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Method for updating exp-ifs */ \r\n    updateIfs(key, value) {\r\n        const expIfs = this.select(`*[exp-if=\"${key}\"]`);\r\n        expIfs.forEach(el => {\r\n            /* BUG: does not check the original display value, assumes block */\r\n            el.style.display = (value ? \"block\" : \"none\");\r\n        });\r\n    }\r\n\r\n    /* Method for updating attributes */\r\n    updateAttributes(key, value) {\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\", \"title\", \"disabled\"];\r\n        let selector = supportedAttributes.map(attr => {\r\n            return `*[exp-${attr}=\"${key}\"]`;\r\n        });\r\n        const that = this;\r\n        const elements = this.select(selector.join());\r\n\r\n        elements.forEach(el => {\r\n            supportedAttributes.forEach(attr => {\r\n                var val = el.getAttribute('exp-' + attr);\r\n                if (val === null || !(val in that.model)) return;\r\n                \r\n                el[attr] = that.model[val];\r\n            })\r\n        });\r\n    }\r\n\r\n\r\n    /* Renders a new element of an array */\r\n    renderNewElement(arrayName, key, item) {\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\"];\r\n        /* Iterate through all exp-for instances linked to targeted array */\r\n        for (expForInstance of this.__storage.loopDefinitions[arrayName]) {\r\n            /* Clone the template and populate it with element data */\r\n            var template = expForInstance.template.cloneNode(true);\r\n            let attrSelector = supportedAttributes.map(attr => {\r\n                return `*[exp-${attr}]`;\r\n            });\r\n            const expAttrs = this.select(attrSelector.join(), template);\r\n            const expBinds = this.select(`[exp-bind]`, template);\r\n            /* Override attributes of the node */\r\n            expAttrs.forEach(el => {\r\n                supportedAttributes.forEach(attr => {\r\n                    const val = el.getAttribute('exp-' + attr);\r\n                    if (val === null) return;\r\n                    if (val.indexOf('.') == -1) {\r\n                        el[attr] = item;\r\n                    } else {\r\n                        const keys = val.split('.');\r\n                        const value = this.findLastField(keys.slice(1), item);\r\n                        el[attr] = value;\r\n                    };\r\n                });\r\n            });\r\n            /* Override inner value of the node */\r\n            expBinds.forEach(el => {\r\n                const val = el.getAttribute('exp-bind');\r\n                if (val.indexOf('.') == -1) {\r\n                    this.writeBindValue(item, el);\r\n                } else {\r\n                    const keys = val.split('.');\r\n                    var value = this.findLastField(keys.slice(1), item);\r\n                    el.textContent = value\r\n                }\r\n            });\r\n            /* Append all children of the newly populated template */\r\n            expForInstance.parentElement.insertBefore(template, expForInstance.siblingElement);\r\n        }\r\n    }\r\n\r\n    /* Override the push function with reactivity functionality */\r\n    overridePush(array, arrayName, key) {\r\n        let self = this;\r\n        array.push = (_ => {\r\n            var original = Array.prototype.push;\r\n            return function() {\r\n                const ret = original.apply(this, arguments);\r\n                self.renderNewElement(arrayName, key, arguments[0]);\r\n                return ret;\r\n            };\r\n        })();\r\n    }\r\n\r\n    /* Method for inserting stylesheet */\r\n    addStyle(css, disabled = false){\r\n        if (this.app === null) return;\r\n        var style = document.createElement('style');\r\n        style.type= 'text/css';\r\n        style.appendChild(document.createTextNode(css)); /* BUG: Does not work in IE8 or less */\r\n        var inserted = this.app.appendChild(style);\r\n        inserted.sheet.disabled = disabled;\r\n        return inserted;\r\n    }\r\n\r\n    /* Method for adding unique ID to CSS selectors */\r\n    generateScopedRule(rule) {\r\n        let selectors = rule.selectorText.split(',');\r\n        let selectorsText = selectors.map(selector => {\r\n            let attr = `exp-${this.getUuid()}`;\r\n            this.addAttributes(selector.trim(), attr);\r\n            if (selector.includes(\".exponea-animate\")) {\r\n                return `${selector}[${this.bannerId}]`\r\n            }\r\n            if (this.select(selector.trim()).length > 0) {\r\n                return `${selector}[${attr}]`;\r\n            }\r\n            return  `${selector}`;\r\n        });\r\n        return `${selectorsText.join()} { ${rule.style.cssText} }`;\r\n    }\r\n\r\n    /* Handle backdrop option */\r\n    addBackdrop() {\r\n        if (this.app == null) return;\r\n        /* Set default backdrop style */\r\n        let backdropStyle = { \r\n            \"position\": \"fixed\",\r\n            \"top\": \"0\",\r\n            \"left\": \"0\",\r\n            \"width\": \"100vw\",\r\n            \"height\": \"100vh\",\r\n            \"z-index\": \"9999\",\r\n            \"background\": \"rgba(0,0,0,0.7)\"\r\n        }\r\n        /* Customize backdrop. If style=true then iterates over an empty array */\r\n        for (var key of Object.keys(this.backdrop)) {\r\n            backdropStyle[key] = this.backdrop[key];\r\n        }\r\n        /* Inject element into DOM */\r\n        let backdrop = document.createElement('div');\r\n        this.setStyleFromObject(backdropStyle, backdrop);\r\n        this.app.parentNode.style['position'] = \"relative\";\r\n        this.app.style[\"z-index\"] = \"9999999\";\r\n        this.backdrop = this.app.parentNode.appendChild(backdrop);\r\n        /* Add event listener which removes banner on click */\r\n        this.backdrop.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            this.removeBanner();\r\n        })\r\n    }\r\n\r\n    /* Adds Powered by Exponea branding */\r\n    addBranding() {\r\n        if (this.app === null) return;\r\n        var branding = document.createElement('object');\r\n        var uuid = this.getUuid();\r\n        this.app.appendChild(branding);\r\n        branding.innerHTML = '<a href=\"https://exponea.com/?utm_campaign=exponea-web-layer&amp;utm_medium=banner&amp;utm_source=referral\" e' + uuid + ' target=\"_blank\">Powered by Exponea</a>';\r\n        this.addStyle('[e' + uuid + ']{font-size:11px;position:absolute;color:' + this.branded + ';opacity:.6;right:5px;bottom:5px;padding-top:0;text-decoration:none}[e' + uuid + ']:hover{opacity:.9}');\r\n    }\r\n\r\n    /* Adds exponea-animate class which is responsible for smooth transitions */\r\n    addAnimationClass(className = \"exponea-animate\") {\r\n        if (this.app === null) return;\r\n        if (this.app.classList) {\r\n            this.app.setAttribute(this.bannerId, '');\r\n            this.app.classList.add(className);\r\n        } else {\r\n            this.app.className += ' ' + className;\r\n        }\r\n    }\r\n\r\n    /* Loads Exponea recommendation and inserts into model */\r\n    loadRecommendations() {\r\n        Object.keys(this.recommendations).forEach((rcm) => {\r\n            /* Has to already exist due to exp-for initialization */\r\n            if (this.model[rcm]) {\r\n                /* Option parameters according to Exponea JS SDK */\r\n                var options = {\r\n                    recommendationId: this.recommendations[rcm].id,\r\n                    size: this.recommendations[rcm].total,\r\n                    callback: data => {\r\n                        /* Push to model */\r\n                        if (data && data.length > 0) {\r\n                            data.forEach(item => {\r\n                                this.model[rcm].push(item)\r\n                            })\r\n                        }\r\n                        /* Update loading key */\r\n                        if (this.recommendations[rcm].loadingKey !== undefined) {\r\n                            this.model[this.recommendations[rcm].loadingKey] = true;\r\n                        }\r\n                    },\r\n                    fillWithRandom: true\r\n                };\r\n                /* Generate recommendation */\r\n                if (this.sdk && this.sdk.getRecommendation) {\r\n                    this.sdk.getRecommendation(options);\r\n                } else {\r\n                    if (this.recommendations[rcm].loadingKey !== undefined) {\r\n                        this.model[this.recommendations[rcm].loadingKey] = true;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /* Remove banner */\r\n    removeBanner() {\r\n        if (this.app === null) return\r\n        this.app.parentNode.removeChild(this.app);\r\n        if (this.backdrop !== null) this.backdrop.parentNode.removeChild(this.backdrop);\r\n    }\r\n\r\n    /**\r\n     * Helper functions\r\n     */\r\n\r\n    /* Return Array from DOM elements collection list */\r\n    listify(list) {\r\n        return Array.prototype.slice.call(list);\r\n    }\r\n    /* Return array from querySelector */\r\n    select(selector, scope = this.app) {\r\n        if (scope === null) return []\r\n        var elements = this.listify(scope.querySelectorAll(selector));\r\n        if (scope.matches(selector)) {\r\n            elements.push(scope);\r\n        }\r\n        return elements;\r\n    }\r\n    /* Helper method for adding attribute, used by CSS scoping */\r\n    addAttributes(selector, attr, val = \"\") {\r\n        this.select(selector).forEach(el => {\r\n            el.setAttribute(attr, val);\r\n        })\r\n    }\r\n    /* Helper method for generating unique IDs, used by CSS scoping */\r\n    getUuid() {\r\n        var firstPart = (Math.random() * 46656) | 0;\r\n        var secondPart = (Math.random() * 46656) | 0;\r\n        firstPart = (\"000\" + firstPart.toString(36)).slice(-3);\r\n        secondPart = (\"000\" + secondPart.toString(36)).slice(-3);\r\n        return firstPart + secondPart;\r\n    }\r\n    /* Add inline style to element */\r\n    setStyleFromObject(object, el) {\r\n        for (var property in object) {\r\n            el.style[property] = object[property];\r\n        }\r\n    }\r\n    /* Helper method for creating event attributes for tracking */\r\n    getEventProperties(action, interactive) {\r\n        if (this.context === null) return;\r\n        return { \r\n            action: action,\r\n            banner_id: this.context.banner_id,\r\n            banner_name: this.context.banner_name,\r\n            banner_type: this.context.banner_type,\r\n            variant_id: this.context.variant_id,\r\n            variant_name: this.context.variant_name,\r\n            interaction: interactive !== false ? true : false,\r\n            location: window.location.href,\r\n            path: window.location.pathname\r\n        };\r\n    }\r\n    /* Helper method for finding nested fields in nested dictionaries */\r\n    findLastField(items, dict) {\r\n        if (items.length == 1) return dict[items[0]];\r\n        else return rec(items.slice(1), dict[items[0]]);\r\n    }\r\n}\r\n\r\nwindow.Exp = Exp;\r\n"]}
=======
{"version":3,"sources":["helpers\\getScript.js","helpers\\anim.js","helpers\\validateEmail.js","Exp.js"],"names":["getScript","src","callback","el","document","createElement","type","async","ieCallback","readyState","setTimeout","addEventListener","onreadystatechange","firstScriptEl","getElementsByTagName","parentNode","insertBefore","module","exports","anim","A","n","g","t","e","a","o","c","q","cb","i","shift","apply","charAt","getElementById","push","expand","padding","margin","border","T","R","B","L","borderRadius","mutex","to","defs","iter","slice","call","arguments","dim","dir","d","replace","fr","timeout","w","window","s","style","getComputedStyle","currentStyle","u","exec","fn","test","fx","color","_","mx","mxv","p","z","Date","getTime","parseFloat","width","_fr","isNaN","clientWidth","clientHeight","opacity","zoom","filter","Math","round","v","ok","toRGBA","concat","rgbaIE","pop","length","join","height","RGBA","b","f","h","l","m","x","y","parseInt","validateEmail","email","re","Exp","settings","model","data","RavenInstance","undefined","RAVEN_PROJECT","RAVEN_CDN","sentry","defaultSentryConfig","use","noConflict","valid","Raven","require","configureRaven","context","initialize","bind","attach","methods","filters","app","bannerId","getUuid","recommendations","scoped","mounted","backdrop","branded","html","sdk","setTagsContext","project_token","token","banner_id","banner_name","inPreview","__storage","loopDefinitions","initializedLoops","tracking","trigger","delay","self","inject","__exp_triggered","body","offsetY","scrollY","action","element","removeEventListener","config","tags","instance","install","isSetup","exp_cookie","cookie","split","forEach","val","k","decodeURIComponent","setUserContext","exponea_cookie","loaded","render","initializeModel","bindModels","bindMethods","bindAttributes","bindClose","bindFors","bindIfs","loadRecommendations","addBackdrop","addBranding","addAnimationClass","track","getEventProperties","control_group","Object","keys","value","key","defineProperty","enumerable","get","set","updateBindings","updateModels","updateIfs","updateAttributes","$anim","$validateEmail","removeBanner","querySelector","innerHTML","trim","appendChild","firstChild","addStyle","rules","listify","sheet","cssRules","scopedStyle","rule","CSSStyleRule","generateScopedRule","CSSMediaRule","conditionText","removeChild","selector","map","input","inputs","select","getAttribute","event","target","checked","template","supportedEvents","events","method","supportedAttributes","attr","elements","setAttribute","stopPropagation","preventDefault","expIfs","display","selecor","$refs","expFors","expFor","hasAttribute","arrayName","hash","cloneNode","removeAttribute","sibling","nextElementSibling","parentElement","siblingElement","remove","renderNewElement","item","overridePush","parsedAttributes","intermediateValue","textContent","bindings","writeBindValue","modelBindings","that","expForInstance","attrSelector","expAttrs","expBinds","indexOf","findLastField","array","original","Array","prototype","ret","css","disabled","createTextNode","inserted","selectors","selectorText","selectorsText","addAttributes","includes","cssText","backdropStyle","setStyleFromObject","branding","uuid","className","classList","add","rcm","options","recommendationId","id","size","total","loadingKey","fillWithRandom","getRecommendation","list","scope","querySelectorAll","matches","firstPart","random","secondPart","toString","object","property","interactive","banner_type","variant_id","variant_name","interaction","location","href","path","pathname","items","dict","rec"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA;;;;;;;;;;;;;;AAcA,IAAImB,OAAO,UAASC,EAAT,EAAY;AACnB;;AAEAA,OAAI,WAASC,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkBC,CAAlB,EAAqB;AACvB,QAAIC,CAAJ;AAAA,QAAOC,CAAP;AAAA,QAAUC,CAAV;AAAA,QACEC,IAAI,EADN;AAAA,QAEEC,KAAK,SAALA,EAAK,CAASC,CAAT,EAAY;AACf;AACA;AACA;AACA;AACA;AACA,UAAGA,IAAIF,EAAEG,KAAF,EAAP,EAAkBD,EAAE,CAAF,IACdV,GAAEY,KAAF,CAAQ,IAAR,EAAcF,CAAd,EAAiBX,IAAjB,CAAsBU,EAAtB,CADc,GAEdC,EAAE,CAAF,IAAO,CAAP,GAAWpB,WAAWmB,EAAX,EAAeC,EAAE,CAAF,IAAK,IAApB,CAAX,IAAwCA,EAAE,CAAF,KAAQD,IAAhD,CAFc;AAGnB,KAXH;;AAaA,QAAGR,EAAEY,MAAL,EAAaZ,IAAIjB,SAAS8B,cAAT,CAAwBb,CAAxB,CAAJ;;AAEb;AACA;AACA;AACA,QAAGA,IAAI,CAAJ,IAAS,CAACA,CAAb,EAAgBC,IAAI,EAAJ,EAAQC,IAAI,CAAZ,EAAeM,GAAGD,IAAI,GAAGO,IAAH,CAAQ,CAACd,KAAK,CAAN,CAAR,CAAP,CAAf;;AAEhB;AACA;AACA;AACA;AACAe,WAAOd,CAAP,EAAU,EAACe,SAAQ,CAAT,EAAYC,QAAO,CAAnB,EAAsBC,QAAO,OAA7B,EAAV,EAAiD,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAUC,CAAV,CAAjD;AACAP,WAAOd,CAAP,EAAU,EAACsB,cAAa,QAAd,EAAV,EAAmC,CAACJ,IAAEG,CAAH,EAAMH,IAAEC,CAAR,EAAWC,IAAED,CAAb,EAAgBC,IAAEC,CAAlB,CAAnC;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAEE,KAAF;;AAEA,SAAIpB,CAAJ,IAASH,CAAT,EAAY;AACVI,UAAIJ,EAAEG,CAAF,CAAJ;AACA,UAAG,CAACC,EAAEoB,EAAH,IAASpB,EAAEoB,EAAF,KAAS,CAArB,EAAwBpB,IAAIJ,EAAEG,CAAF,IAAO,EAACqB,IAAIpB,CAAL,EAAX,CAFd,CAEmC;;AAE7CN,SAAE2B,IAAF,CAAOrB,CAAP,EAAUL,CAAV,EAAaI,CAAb,EAAgBD,CAAhB,EAJU,CAIW;AACtB;;AAEDJ,OAAE4B,IAAF,CAAO1B,CAAP,EAAUC,IAAE,IAAZ,EAAkBM,EAAlB;;AAEA,WAAO;AACL;AACAV,YAAM,gBAAW;AACfS,UAAEO,IAAF,CAAO,GAAGc,KAAH,CAASC,IAAT,CAAcC,SAAd,CAAP;AACA,eAAO,IAAP;AACD;AALI,KAAP;AAOD,GAnDD;;AAqDA,MAAIX,IAAE,KAAN;AAAA,MAAaC,IAAE,OAAf;AAAA,MAAwBC,IAAE,QAA1B;AAAA,MAAoCC,IAAE,MAAtC;AAAA,MACEE,QAAQ,CADV;;;AAGE;AACAT,WAAS,SAATA,MAAS,CAASd,CAAT,EAAY8B,GAAZ,EAAiBC,GAAjB,EAAsB5B,CAAtB,EAAyBK,CAAzB,EAA4BwB,CAA5B,EAA+B5B,CAA/B,EAAkC;AACzC,SAAID,CAAJ,IAASH,CAAT,EAAY;AAAG;AACb,UAAGG,KAAK2B,GAAR,EAAa;AACX1B,YAAIJ,EAAEG,CAAF,CAAJ;AACA,aAAIK,IAAI,CAAR,EAAWwB,IAAID,IAAIvB,CAAJ,CAAf,EAAuBA,GAAvB;AAA6B;AAC3B;AACA;AACA;AACAR,YAAEG,EAAE8B,OAAF,CAAUH,IAAI3B,CAAJ,CAAV,EAAkB,EAAlB,IAAwB6B,CAAxB,IAA6BF,IAAI3B,CAAJ,KAAU,EAAvC,CAAF,IAAgD;AAC9CqB,gBAAIpB,EAAEoB,EAAF,KAAS,CAAV,GAAepB,EAAEoB,EAAjB,GAAuBpB,EAAEoB,EAAF,IAAQpB,CADY,EACR8B,IAAG9B,EAAE8B,EADG,EACChC,GAAEE,EAAEF;AADL,WAAhD;AAJF,SAOA,OAAOF,EAAEG,CAAF,CAAP;AACD;AACF;AACF,GAlBH;AAAA,MAoBEgC,UAAU,UAASC,CAAT,EAAYjC,CAAZ,EAAe;AACvB,WAAOiC,EAAE,MAAIjC,CAAN,KAAYiC,EAAE,YAAUjC,CAAZ,CAAZ,IAA8BiC,EAAE,SAAOjC,CAAT,CAA9B,IAA6CiC,EAAE,QAAMjC,CAAR,CAA7C,IAA2DiC,EAAE,OAAKjC,CAAP,CAAlE;AACD,GAFS,CAERkC,MAFQ,EAEA,sBAFA,CApBZ;;AAwBAvC,KAAE2B,IAAF,GAAS,UAASrB,CAAT,EAAYL,CAAZ,EAAeI,CAAf,EAAkBD,CAAlB,EAAqBoC,CAArB,EAAwB;AAC/BA,QAAIvC,EAAEwC,KAAN;AACAnC,MAAED,CAAF,GAAMA,CAAN,CAF+B,CAErB;AACVC,MAAEL,CAAF,GAAMA,CAAN,CAH+B,CAGrB;AACVK,MAAEkC,CAAF,GAAOnC,KAAKmC,CAAN,GAAWA,CAAX,GAAevC,CAArB,CAJ+B,CAIN;AACzBK,MAAEF,CAAF,GAAME,EAAEF,CAAF,IAAOA,CAAb,CAL+B,CAKd;;AAEjBE,MAAE8B,EAAF,GAAO9B,EAAE8B,EAAF,KAAS9B,EAAE8B,EAAF,KAAS,CAAT,GAAa,CAAb,GAAiB9B,EAAEkC,CAAF,IAAOvC,CAAP,GAAWA,EAAEI,CAAF,CAAX,GAC3B,CAACkC,OAAOG,gBAAP,GAA0BA,iBAAiBzC,CAAjB,EAAoB,IAApB,CAA1B,GAAsDA,EAAE0C,YAAzD,EAAuEtC,CAAvE,CADC,CAAP;;AAGAC,MAAEsC,CAAF,GAAM,CAAC,WAAWC,IAAX,CAAgBvC,EAAEoB,EAAlB,KAAyB,WAAWmB,IAAX,CAAgBvC,EAAE8B,EAAlB,CAAzB,IAAkD,CAAC,CAAD,EAAI,CAAJ,CAAnD,EAA2D,CAA3D,CAAN,CAV+B,CAUuC;;AAEtE;AACA9B,MAAEwC,EAAF,GAAO,SAASC,IAAT,CAAc1C,CAAd,IAAmBL,GAAEgD,EAAF,CAAKC,KAAxB,GAAiCjD,GAAEgD,EAAF,CAAK3C,CAAL,KAAWL,GAAEgD,EAAF,CAAKE,CAAxD;;AAEA;AACA5C,MAAE6C,EAAF,GAAO,UAAU9C,CAAjB;AACAJ,MAAEK,EAAE6C,EAAJ,IAAU7C,EAAE8C,GAAF,GAAQ3B,KAAlB;AACA,QAAGxB,EAAEK,EAAE6C,EAAJ,KAAW7C,EAAE8C,GAAhB,EAAqB9C,EAAE8C,GAAF,GAAQ,IAAR,CAlBU,CAkBK;AACrC,GAnBD;;AAqBApD,KAAE4B,IAAF,GAAS,UAAS1B,CAAT,EAAYC,CAAZ,EAAeM,EAAf,EAAmB;AAC1B,QAAIyC,CAAJ;AAAA,QAAOxC,CAAP;AAAA,QAAUJ,CAAV;AAAA,QAAa+C,CAAb;AAAA,QAAgBjD,CAAhB;AAAA,QACEkD,IAAI,CAAC,IAAIC,IAAJ,EAAD,GAAYpD,CADlB;AAAA,QAGA+C,IAAI,SAAJA,CAAI,GAAW;AACbxC,UAAI4C,IAAI,IAAIC,IAAJ,GAAWC,OAAX,EAAR;;AAEA,UAAG9C,IAAI,EAAP,EAAW;AACT,aAAIJ,CAAJ,IAASJ,CAAT;AACEI,cAAIJ,EAAEI,CAAF,CAAJ,EACAA,EAAE+C,CAAF,GAAM,CADN,EAEA/C,EAAEwC,EAAF,CAAKxC,CAAL,EAAQA,EAAEL,CAAV,EAAaK,EAAEoB,EAAf,EAAmBpB,EAAE8B,EAArB,EAAyB9B,EAAED,CAA3B,EAA8BC,EAAEF,CAAhC,CAFA;AADF,SAKAK,MAAMA,IAAN;AAED,OARD,MAQO;;AAELC,YAAIA,IAAEP,CAAN;;AAEA,aAAIG,CAAJ,IAASJ,CAAT,EAAY;AACVI,cAAIJ,EAAEI,CAAF,CAAJ;;AAEA,cAAGA,EAAEL,CAAF,CAAIK,EAAE6C,EAAN,KAAa7C,EAAE8C,GAAlB,EAAuB,OAHb,CAGsB;;AAEhChD,cAAIE,EAAEF,CAAN;AACAiD,cAAI3C,CAAJ;;AAEA,cAAGN,KAAK,KAAR,EAAe;AACbiD,gBAAI,IAAIA,CAAR;AAED,WAHD,MAGO,IAAGjD,KAAK,MAAR,EAAgB;AACrBiD,gBAAI,CAAC,MAAMA,CAAP,IAAU,CAAd;AACAA,gBAAI,IAAI,CAAEA,IAAEA,CAAF,GAAIA,CAAJ,GAAQA,IAAE,CAAX,GAAgB,CAAjB,IAAoB,CAA5B;AAED,WAJM,MAIA,IAAGjD,KAAK,SAAR,EAAmB;AACxBiD,gBAAI,IAAIA,CAAR;AACAA,gBAAIA,IAAEA,CAAF,GAAIA,CAAR;AAED,WAJM,MAIA;AAAG;AACRA,gBAAI,IAAIA,IAAEA,CAAF,GAAIA,CAAZ;AACD;AACD/C,YAAE+C,CAAF,GAAMA,CAAN;AACA/C,YAAEwC,EAAF,CAAKxC,CAAL,EAAQA,EAAEL,CAAV,EAAaK,EAAEoB,EAAf,EAAmBpB,EAAE8B,EAArB,EAAyB9B,EAAED,CAA3B,EAA8BC,EAAEF,CAAhC;AACD;AACDiC,kBAAUA,QAAQa,CAAR,CAAV,GAAuB5D,WAAW4D,CAAX,EAAc,EAAd,CAAvB;AACD;AACF,KA7CD;AA8CAA;AACD,GAhDD;;AAkDAlD,KAAEgD,EAAF,GAAO,EAAG;;AAERE,OAAG,WAAS5C,CAAT,EAAYL,CAAZ,EAAeyB,EAAf,EAAmBU,EAAnB,EAAuB/B,CAAvB,EAA0BD,CAA1B,EAA6B;AAAG;AACjCgC,WAAKqB,WAAWrB,EAAX,KAAkB,CAAvB,EACAV,KAAK+B,WAAW/B,EAAX,KAAkB,CADvB,EAEApB,EAAEkC,CAAF,CAAInC,CAAJ,IAAS,CAACC,EAAE+C,CAAF,IAAO,CAAP,GAAW3B,EAAX,GAAiBpB,EAAE+C,CAAF,IAAK3B,KAAKU,EAAV,IAAgBA,EAAlC,IAAyC9B,EAAEsC,CAFpD;AAGD,KANI;;AAQLc,WAAO,eAASpD,CAAT,EAAYL,CAAZ,EAAeyB,EAAf,EAAmBU,EAAnB,EAAuB/B,CAAvB,EAA0BD,CAA1B,EAA6B;AAAG;AACrC,UAAG,EAAEE,EAAEqD,GAAF,IAAS,CAAX,CAAH,EACErD,EAAEqD,GAAF,GAAQ,CAACC,MAAMxB,KAAKqB,WAAWrB,EAAX,CAAX,CAAD,GAA8BA,EAA9B,GAAmC/B,KAAK,OAAL,GAAeJ,EAAE4D,WAAjB,GAA+B5D,EAAE6D,YAA5E;AACF9D,SAAEgD,EAAF,CAAKE,CAAL,CAAO5C,CAAP,EAAUL,CAAV,EAAayB,EAAb,EAAiBpB,EAAEqD,GAAnB,EAAwBtD,CAAxB,EAA2BD,CAA3B;AACD,KAZI;;AAcL2D,aAAS,iBAASzD,CAAT,EAAYL,CAAZ,EAAeyB,EAAf,EAAmBU,EAAnB,EAAuB/B,CAAvB,EAA0BD,CAA1B,EAA6B;AACpC,UAAGwD,MAAMxB,KAAKA,MAAM9B,EAAEqD,GAAnB,CAAH,EACEvB,KAAKnC,EAAEwC,KAAP,EACAL,GAAG4B,IAAH,GAAU,CADV,EAEA5B,KAAK9B,EAAEqD,GAAF,GAAQ,CAAC,0BAA0Bd,IAA1B,CAA+BT,GAAG6B,MAAlC,KAA6C,EAA9C,EAAkD,CAAlD,IAAqD,GAArD,IAA4D,CAFzE;AAGF7B,YAAM,CAAN;AACAV,WAAMpB,EAAE+C,CAAF,IAAK3B,KAAKU,EAAV,IAAgBA,EAAtB;AACAnC,UAAIA,EAAEwC,KAAN;AACA,UAAGpC,KAAKJ,CAAR,EAAW;AACTA,UAAEI,CAAF,IAAOqB,EAAP;AACD,OAFD,MAEO;AACLzB,UAAEgE,MAAF,GAAWvC,MAAM,CAAN,GAAU,EAAV,GAAe,WAAWrB,CAAX,GAAe,GAAf,GAAqB6D,KAAKC,KAAL,CAAWzC,KAAG,GAAd,CAArB,GAA0C,GAApE;AACD;AACF,KA3BI;;AA6BLuB,WAAO,eAAS3C,CAAT,EAAYL,CAAZ,EAAeyB,EAAf,EAAmBU,EAAnB,EAAuB/B,CAAvB,EAA0BD,CAA1B,EAA6BM,CAA7B,EAAgC0D,CAAhC,EAAmC;AACxC,UAAG,CAAC9D,EAAE+D,EAAN,EAAU;AACR3C,aAAKpB,EAAEoB,EAAF,GAAO1B,GAAEsE,MAAF,CAAS5C,EAAT,CAAZ;AACAU,aAAK9B,EAAE8B,EAAF,GAAOpC,GAAEsE,MAAF,CAASlC,EAAT,CAAZ;AACA,YAAGV,GAAG,CAAH,KAAS,CAAZ,EAAeA,KAAK,GAAG6C,MAAH,CAAUnC,EAAV,CAAL,EAAoBV,GAAG,CAAH,IAAQ,CAA5B;AACf,YAAGU,GAAG,CAAH,KAAS,CAAZ,EAAeA,KAAK,GAAGmC,MAAH,CAAU7C,EAAV,CAAL,EAAoBU,GAAG,CAAH,IAAQ,CAA5B;AACf9B,UAAE+D,EAAF,GAAO,CAAP;AACD;;AAEDD,UAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU9D,EAAE+C,CAAF,IAAK3B,GAAG,CAAH,IAAQU,GAAG,CAAH,CAAb,IAAsB,IAAEA,GAAG,CAAH,CAAlC,CAAJ;AACA,WAAI1B,IAAE,CAAN,EAASA,KAAG,CAAZ,EAAeA,GAAf;AAAoB0D,UAAE1D,CAAF,IAAOwD,KAAKC,KAAL,CAAW7D,EAAE+C,CAAF,IAAK3B,GAAGhB,CAAH,IAAQ0B,GAAG1B,CAAH,CAAb,IAAsB,IAAE0B,GAAG1B,CAAH,CAAnC,CAAP;AAApB,OAEA,IAAG0D,EAAE,CAAF,KAAQ,CAAR,IAAapE,GAAEwE,MAAlB,EAA0BJ,EAAEK,GAAF;;AAE1B,UAAI;AACFnE,UAAEkC,CAAF,CAAInC,CAAJ,IAAS,CAAC+D,EAAEM,MAAF,GAAW,CAAX,GAAe,OAAf,GAAyB,MAA1B,IAAoCN,EAAEO,IAAF,CAAO,GAAP,CAApC,GAAkD,GAA3D;AACD,OAFD,CAEE,OAAMvE,CAAN,EAAS;AACTJ,WAAEwE,MAAF,GAAW,CAAX;AACD;AACF;AAhDI,GAAP;AAkDAxE,KAAEgD,EAAF,CAAK4B,MAAL,GAAc5E,GAAEgD,EAAF,CAAKU,KAAnB;;AAEA1D,KAAE6E,IAAF,GAAS,qGAAT;AACA7E,KAAEsE,MAAF,GAAW,UAAS9B,CAAT,EAAY4B,CAAZ,EAAe;AACxBA,QAAI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAJ;AACA5B,MAAEL,OAAF,CAAU,KAAV,EAAiB,EAAjB,EAAqBA,OAArB,CAA6BnC,GAAE6E,IAA/B,EAAqC,UAASnE,CAAT,EAAYL,CAAZ,EAAcyE,CAAd,EAAgBvE,CAAhB,EAAmBwE,CAAnB,EAAqB7E,CAArB,EAAuB8E,CAAvB,EAA0BC,CAA1B,EAA4BC,CAA5B,EAA8BjF,CAA9B,EAAgCK,CAAhC,EAAmCgC,CAAnC,EAAqC6C,CAArC,EAAuCC,CAAvC,EAAyC9B,CAAzC,EAA4C;AAC/E,UAAI0B,IAAI,CAAC3E,IAAEA,CAAF,IAAK0E,CAAN,EAASD,IAAEA,CAAF,IAAK5E,CAAd,EAAiBK,IAAEA,CAAF,IAAKyE,CAAtB,CAAR;AAAA,UAAkC3B,IAAI,CAAC4B,CAAD,EAAIC,CAAJ,EAAOjF,CAAP,CAAtC;;AAEA,WAAIS,IAAE,CAAN,EAASA,IAAE,CAAX,EAAcA,GAAd;AAAmBsE,UAAEtE,CAAF,IAAO2E,SAASL,EAAEtE,CAAF,CAAT,EAAe,EAAf,CAAP,EAA2B2C,EAAE3C,CAAF,IAAOwD,KAAKC,KAAL,CAAWd,EAAE3C,CAAF,IAAK,IAAhB,CAAlC;AAAnB,OAEA0D,IAAI,CAACY,EAAE,CAAF,KAAM3B,EAAE,CAAF,CAAN,IAAYf,CAAZ,IAAe,CAAhB,EAAoB0C,EAAE,CAAF,KAAM3B,EAAE,CAAF,CAAN,IAAY8B,CAAZ,IAAe,CAAnC,EAAuCH,EAAE,CAAF,KAAM3B,EAAE,CAAF,CAAN,IAAY+B,CAAZ,IAAe,CAAtD,EAA0D9E,KAAGgD,CAAH,IAAM,CAAhE,CAAJ;AACD,KAND;AAOA,WAAOc,CAAP;AACD,GAVD;;AAYA,SAAOpE,EAAP;AACH,CAzNU,EAAX;;AA2NAH,OAAOC,OAAP,GAAiBC,IAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzOA;;;;;AAKA,SAASuF,aAAT,CAAuBC,KAAvB,EAA8B;AAC1B,MAAIC,KAAK,yJAAT;AACA,SAAOA,GAAGzC,IAAH,CAAQwC,KAAR,CAAP;AACH;;AAED1F,OAAOC,OAAP,GAAiBwF,aAAjB","file":"Exp.map","sourcesContent":["/**\r\n * Fetches and inserts a script into the page before the first\r\n * pre-existing script element, and optionally calls a callback\r\n * on completion.\r\n *\r\n * [TODO] Make this a module of its own so it can be used elsewhere.\r\n * \r\n * @param  {String}   src      source of the script\r\n * @param  {Function} callback (optional) onload callback\r\n */\r\nvar getScript = function (src, callback) {\r\n    var el = document.createElement('script');\r\n\r\n    el.type = 'text/javascript';\r\n    el.async = false;\r\n    el.src = src;\r\n\r\n    /**\r\n     * Ensures callbacks work on older browsers by continuously\r\n     * checking the readyState of the request. This is defined once\r\n     * and reused on subsequent calls to getScript.\r\n     * \r\n     * @param  {Element}   el      script element\r\n     * @param  {Function} callback onload callback\r\n     */\r\n    getScript.ieCallback = getScript.ieCallback || function (el, callback) {\r\n        if (el.readyState === 'loaded' || el.readyState === 'complete') {\r\n            callback();\r\n        } else {\r\n            setTimeout(function () { getScript.ieCallback(el, callback); }, 100);\r\n        }\r\n    };\r\n\r\n    if (typeof callback === 'function') {\r\n        if (typeof el.addEventListener !== 'undefined') {\r\n            el.addEventListener('load', callback, false);\r\n        } else {\r\n            el.onreadystatechange = function () {\r\n                el.onreadystatechange = null;\r\n                getScript.ieCallback(el, callback);\r\n            };\r\n        }\r\n    }\r\n\r\n    // This is defined once and reused on subsequeent calls to getScript\r\n    getScript.firstScriptEl = getScript.firstScriptEl || document.getElementsByTagName('script')[0];\r\n    getScript.firstScriptEl.parentNode.insertBefore(el, getScript.firstScriptEl);\r\n};\r\n\r\nmodule.exports = getScript;","/** Copyright 2013 mocking@gmail.com * http://github.com/relay-zz/anim\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n   http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License. */\r\n\r\nvar anim = function(A) {\r\n    \"use strict\";\r\n    \r\n    A = function(n, g, t, e) {\r\n      var a, o, c,\r\n        q = [],\r\n        cb = function(i) {\r\n          //our internal callback function maintains a queue of objects \r\n          //that contain callback info. If the object is an array of length\r\n          //over 2, then it is parameters for the next animation. If the object\r\n          //is an array of length 1 and the item in the array is a number,\r\n          //then it is a timeout period, otherwise it is a callback function.\r\n          if(i = q.shift()) i[1] ?\r\n              A.apply(this, i).anim(cb) :\r\n              i[0] > 0 ? setTimeout(cb, i[0]*1000) : (i[0](), cb())\r\n        };\r\n    \r\n      if(n.charAt) n = document.getElementById(n);\r\n    \r\n      //if the 1st param is a number then treat it as a timeout period.\r\n      //If the node reference is null, then we skip it and run the next callback\r\n      //so that we can continue with the animation without throwing an error.\r\n      if(n > 0 || !n) g = {}, t = 0, cb(q = [].push([n || 0]));\r\n    \r\n      //firefox don't allow reading shorthand CSS styles like \"margin\" so\r\n      //we have to expand them to be \"margin-left\", \"margin-top\", etc.\r\n      //Also, expanding them allows the 4 values to animate independently \r\n      //in the case that the 4 values are different to begin with.\r\n      expand(g, {padding:0, margin:0, border:\"Width\"}, [T, R, B, L]);\r\n      expand(g, {borderRadius:\"Radius\"}, [T+L, T+R, B+R, B+L]);\r\n    \r\n      //if we animate a property of a node, we set a unique number on the\r\n      //node, so that if we run another animation concurrently, it will halt\r\n      //the first animation. This is needed so that if we animate on mouseover\r\n      //and want to reverse the animation on mouseout before the mouseover\r\n      //is complete, they won't clash and the last animation prevails.\r\n      ++mutex;\r\n    \r\n      for(a in g) {\r\n        o = g[a];\r\n        if(!o.to && o.to !== 0) o = g[a] = {to: o};  //shorthand {margin:0} => {margin:{to:0}}\r\n    \r\n        A.defs(o, n, a, e);  //set defaults, get initial values, selects animation fx\r\n      }\r\n    \r\n      A.iter(g, t*1000, cb);\r\n    \r\n      return {\r\n        //this allows us to queue multiple animations together in compact syntax\r\n        anim: function() {\r\n          q.push([].slice.call(arguments));\r\n          return this\r\n        }\r\n      }\r\n    };\r\n    \r\n    var T=\"Top\", R=\"Right\", B=\"Bottom\", L=\"Left\",\r\n      mutex = 1,\r\n    \r\n      //{border:1} => {borderTop:1, borderRight:1, borderBottom:1, borderLeft:1}\r\n      expand = function(g, dim, dir, a, i, d, o) {\r\n        for(a in g) {  //for each animation property\r\n          if(a in dim) {\r\n            o = g[a];\r\n            for(i = 0; d = dir[i]; i++)  //for each dimension (Top, Right, etc.)\r\n              //margin => marginTop\r\n              //borderWidth => borderTopWidth\r\n              //borderRadius => borderTopRadius\r\n              g[a.replace(dim[a], \"\") + d + (dim[a] || \"\")] = {\r\n                to:(o.to === 0) ? o.to : (o.to || o), fr:o.fr, e:o.e\r\n              };\r\n            delete g[a];\r\n          }\r\n        }\r\n      },\r\n    \r\n      timeout = function(w, a) {\r\n        return w[\"r\"+a] || w[\"webkitR\"+a] || w[\"mozR\"+a] || w[\"msR\"+a] || w[\"oR\"+a]\r\n      }(window, \"equestAnimationFrame\");\r\n    \r\n    A.defs = function(o, n, a, e, s) {\r\n      s = n.style;\r\n      o.a = a;  //attribute\r\n      o.n = n;  //node\r\n      o.s = (a in s) ? s : n;  //= n.style || n\r\n      o.e = o.e || e;  //easing\r\n    \r\n      o.fr = o.fr || (o.fr === 0 ? 0 : o.s == n ? n[a] :\r\n            (window.getComputedStyle ? getComputedStyle(n, null) : n.currentStyle)[a]);\r\n    \r\n      o.u = (/\\d(\\D+)$/.exec(o.to) || /\\d(\\D+)$/.exec(o.fr) || [0, 0])[1];  //units (px, %)\r\n    \r\n      //which animation fx to use. Only color needs special treatment.\r\n      o.fn = /color/i.test(a) ? A.fx.color : (A.fx[a] || A.fx._);\r\n    \r\n      //the mutex is composed of the animating property name and a unique number\r\n      o.mx = \"anim_\" + a;\r\n      n[o.mx] = o.mxv = mutex;\r\n      if(n[o.mx] != o.mxv) o.mxv = null;  //test expando\r\n    };\r\n    \r\n    A.iter = function(g, t, cb) {\r\n      var _, i, o, p, e,\r\n        z = +new Date + t,\r\n    \r\n      _ = function() {\r\n        i = z - new Date().getTime();\r\n    \r\n        if(i < 50) {\r\n          for(o in g)\r\n            o = g[o],\r\n            o.p = 1,\r\n            o.fn(o, o.n, o.to, o.fr, o.a, o.e);\r\n    \r\n          cb && cb()\r\n    \r\n        } else {\r\n    \r\n          i = i/t;\r\n    \r\n          for(o in g) {\r\n            o = g[o];\r\n    \r\n            if(o.n[o.mx] != o.mxv) return;  //if mutex not match then halt.\r\n    \r\n            e = o.e;\r\n            p = i;\r\n    \r\n            if(e == \"lin\") {\r\n              p = 1 - p\r\n      \r\n            } else if(e == \"ease\") {\r\n              p = (0.5 - p)*2;\r\n              p = 1 - ((p*p*p - p*3) + 2)/4\r\n      \r\n            } else if(e == \"ease-in\") {\r\n              p = 1 - p;\r\n              p = p*p*p\r\n      \r\n            } else {  //ease-out\r\n              p = 1 - p*p*p\r\n            }\r\n            o.p = p;\r\n            o.fn(o, o.n, o.to, o.fr, o.a, o.e)\r\n          }\r\n          timeout ? timeout(_) : setTimeout(_, 20)\r\n        }\r\n      }\r\n      _();\r\n    };\r\n    \r\n    A.fx = {  //CSS names which need special handling\r\n    \r\n      _: function(o, n, to, fr, a, e) {  //for generic fx\r\n        fr = parseFloat(fr) || 0,\r\n        to = parseFloat(to) || 0,\r\n        o.s[a] = (o.p >= 1 ? to : (o.p*(to - fr) + fr)) + o.u\r\n      },\r\n    \r\n      width: function(o, n, to, fr, a, e) {  //for width/height fx\r\n        if(!(o._fr >= 0))\r\n          o._fr = !isNaN(fr = parseFloat(fr)) ? fr : a == \"width\" ? n.clientWidth : n.clientHeight;\r\n        A.fx._(o, n, to, o._fr, a, e)\r\n      },\r\n    \r\n      opacity: function(o, n, to, fr, a, e) {\r\n        if(isNaN(fr = fr || o._fr))\r\n          fr = n.style,\r\n          fr.zoom = 1,\r\n          fr = o._fr = (/alpha\\(opacity=(\\d+)\\b/i.exec(fr.filter) || {})[1]/100 || 1;\r\n        fr *= 1;\r\n        to = (o.p*(to - fr) + fr);\r\n        n = n.style;\r\n        if(a in n) {\r\n          n[a] = to\r\n        } else {\r\n          n.filter = to >= 1 ? \"\" : \"alpha(\" + a + \"=\" + Math.round(to*100) + \")\"\r\n        }\r\n      },\r\n    \r\n      color: function(o, n, to, fr, a, e, i, v) {\r\n        if(!o.ok) {\r\n          to = o.to = A.toRGBA(to);\r\n          fr = o.fr = A.toRGBA(fr);\r\n          if(to[3] == 0) to = [].concat(fr), to[3] = 0;\r\n          if(fr[3] == 0) fr = [].concat(to), fr[3] = 0;\r\n          o.ok = 1\r\n        }\r\n    \r\n        v = [0, 0, 0, o.p*(to[3] - fr[3]) + 1*fr[3]];\r\n        for(i=2; i>=0; i--) v[i] = Math.round(o.p*(to[i] - fr[i]) + 1*fr[i]);\r\n    \r\n        if(v[3] >= 1 || A.rgbaIE) v.pop();\r\n    \r\n        try {\r\n          o.s[a] = (v.length > 3 ? \"rgba(\" : \"rgb(\") + v.join(\",\") + \")\"\r\n        } catch(e) {\r\n          A.rgbaIE = 1\r\n        }\r\n      }\r\n    };\r\n    A.fx.height = A.fx.width;\r\n    \r\n    A.RGBA = /#(.)(.)(.)\\b|#(..)(..)(..)\\b|(\\d+)%,(\\d+)%,(\\d+)%(?:,([\\d\\.]+))?|(\\d+),(\\d+),(\\d+)(?:,([\\d\\.]+))?\\b/;\r\n    A.toRGBA = function(s, v) {\r\n      v = [0, 0, 0, 0];\r\n      s.replace(/\\s/g, \"\").replace(A.RGBA, function(i, a,b,c, f,g,h, l,m,n,o, w,x,y,z) {\r\n        var h = [a+a||f, b+b||g, c+c||h], p = [l, m, n];\r\n    \r\n        for(i=0; i<3; i++) h[i] = parseInt(h[i], 16), p[i] = Math.round(p[i]*2.55);\r\n    \r\n        v = [h[0]||p[0]||w||0,  h[1]||p[1]||x||0,  h[2]||p[2]||y||0,  o||z||1]\r\n      });\r\n      return v\r\n    };\r\n    \r\n    return A\r\n}();\r\n\r\nmodule.exports = anim;","/**\r\n * \r\n * @param {string} email \r\n * @returns {bool}\r\n */\r\nfunction validateEmail(email) {\r\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n}\r\n\r\nmodule.exports = validateEmail;","/* Main class */\r\nclass Exp {\r\n    constructor(settings) {\r\n        /* Initializing model */\r\n        this.model = settings.data || {};\r\n\r\n        this.RavenInstance = undefined;\r\n        this.RAVEN_PROJECT = 'https://0a9f9e0203be4cff88075453bfdcce3b@sentry.exponea.com/12';\r\n        this.RAVEN_CDN = 'https://cdn.ravenjs.com/3.24.2/raven.min.js';\r\n        \r\n        this.sentry = (_ => {\r\n            const defaultSentryConfig = { use: false, noConflict: true };\r\n            if (settings.sentry === undefined) {\r\n                return defaultSentryConfig;\r\n            } else {\r\n                /* check if provided config is valid */\r\n                const valid = (settings.sentry.use !== undefined && settings.sentry.noConflict !== undefined);\r\n                if (valid) {\r\n                    return settings.sentry;\r\n                } else {\r\n                    return defaultSentryConfig;\r\n                }\r\n            }\r\n        })();\r\n        \r\n        if (this.sentry.use && typeof(Raven) === \"undefined\") {\r\n            const getScript = require('./helpers/getScript.js');\r\n            getScript(this.RAVEN_CDN, _ => {\r\n                this.configureRaven(this.sentry.noConflict);\r\n\r\n                this.RavenInstance.context(function() {\r\n                    this.initialize(settings);\r\n                }.bind(this))\r\n            })\r\n        } else if (this.sentry.use) {\r\n            this.configureRaven(this.sentry.noConflict);\r\n            this.initialize(settings)\r\n        } else {\r\n            this.initialize(settings)\r\n        }\r\n        \r\n        /* If no trigger type inject normally */\r\n        return this.model;\r\n    }\r\n\r\n    initialize(settings) {\r\n        /* Find DOM element which contains Exp code */\r\n        this.el = settings.el || null;\r\n        /* Find DOM element to which append HTML code */\r\n        this.attach = settings.attach || null;\r\n        \r\n        /* Initializing data model */\r\n        this.data = settings.data || {};\r\n        /* Controller methods */\r\n        this.methods = settings.methods || {};\r\n        /* Filters */\r\n        this.filters = settings.filters || {};\r\n\r\n        /* Initialization of Exp app */\r\n        this.app = null;\r\n\r\n        /* Generate Id for banner */\r\n        this.bannerId = 'e-' + this.getUuid();\r\n        /* Dictionaries describing recommendations */\r\n        this.recommendations = settings.recommendations || {};\r\n\r\n        /* Scoping CSS rules locally for banner */\r\n        this.scoped = settings.scoped || false;\r\n        /* Function triggered after rendering the banner */\r\n        this.mounted = settings.mounted || null;\r\n        /* Backdrop in front of which Exp app will be rendered */\r\n        this.backdrop = settings.backdrop || null;\r\n        /* Adding Exponea branding options, by default black */\r\n        if (settings.branded === undefined || settings.branded === null || (settings.branded && settings.branded !== \"black\" && settings.branded !== \"white\")) {\r\n            this.branded = \"black\";\r\n        } else {\r\n            this.branded = settings.branded;\r\n        }\r\n\r\n        /* Look for either explicit code or for HTML code in context */\r\n        this.html = (_ => {\r\n            if (settings.html !== undefined) return settings.html;\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.html !== undefined) return settings.context.html;\r\n            }\r\n            return null;\r\n        })();\r\n        /* Look for either explicit code or for CSS code in context */\r\n        this.style = (_ => {\r\n            if (settings.style !== undefined) return settings.style;\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.style !== undefined) return settings.context.style;\r\n            }\r\n            return null;\r\n        })();\r\n        /* Exponea SDK passed through context attribute when using production banners */\r\n        this.sdk = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.sdk !== undefined) {\r\n                    if (settings.context.sdk._) {\r\n                        this.RavenInstance.setTagsContext({ project_token: settings.context.sdk._[0][1][0].token });\r\n                    }\r\n                    return settings.context.sdk;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        })();\r\n        /* Exponea banner context */\r\n        this.context = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.data !== undefined) {\r\n                    if (settings.context.data.banner_id && settings.context.data.banner_name) {\r\n                        this.RavenInstance.setTagsContext({ banner_id: settings.context.data.banner_id, banner_name: settings.context.data.banner_name });\r\n                    }\r\n                    return settings.context.data;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        })();\r\n        \r\n        /* Check whether banner is in Exponea editor or not */\r\n        this.inPreview = (_ => {\r\n            if (settings.context !== undefined) {\r\n                if (settings.context.inPreview !== undefined) return settings.context.inPreview;\r\n            }\r\n\r\n            return false;\r\n        })();\r\n\r\n        /* Internal storage */\r\n        this.__storage = {\r\n            loopDefinitions: {},\r\n            initializedLoops: {}\r\n        };\r\n\r\n        /* Tracking by default true. Tracks show/close automatically. */\r\n        if (settings.tracking === undefined) {\r\n            this.tracking = true;\r\n        } else {\r\n            this.tracking = settings.tracking;\r\n        }\r\n        /* Setting trigger for banner display */\r\n        this.trigger = settings.trigger || null;\r\n        \r\n        /* If trigger exists, inject into DOM based on the type of the trigger */\r\n        if (this.trigger !== null && !this.inPreview) {\r\n            if (this.trigger.type == \"onready\") {\r\n                /* Renders banner once page elements are loaded */\r\n                const delay = this.trigger.delay || 0;\r\n                var self = this;\r\n                window.addEventListener('load', function() {\r\n                    setTimeout(() => {\r\n                        self.inject();\r\n                    }, delay);\r\n                });\r\n                return;\r\n            } else if (this.trigger.type == \"onexit\") {\r\n                /* Renders banner if user wants to leave the page */\r\n                const delay = this.trigger.delay || 0;\r\n                window.__exp_triggered = false;\r\n                var self = this;\r\n                document.body.addEventListener(\"mouseleave\", function (e) {\r\n                    /* Check window was left */\r\n                    if (e.offsetY - window.scrollY < 0 && !window.__exp_triggered) {\r\n                        window.__exp_triggered = true;\r\n                        setTimeout(() => {\r\n                            self.inject(self);\r\n                        }, delay);\r\n                    }\r\n                });\r\n                return;\r\n            } else if (this.trigger.type = \"onaction\") {\r\n                /* Renders banner on specific user action */\r\n                var self = this;\r\n                var action = this.trigger.action || \"click\";\r\n                const delay = this.trigger.delay || 0;\r\n                if (this.trigger.element) {\r\n                    const callback = function() {\r\n                        setTimeout(() => {\r\n                            self.inject(self);\r\n                        }, delay);\r\n                        self.trigger.element.removeEventListener(action, callback, false)\r\n                    }\r\n                    this.trigger.element.addEventListener(action, callback);\r\n                }\r\n                return;\r\n            } else {\r\n                /* If incorrect type of trigger is given do not render at all */\r\n                throw `Incorrect trigger type ${ this.trigger.type }`;\r\n            }\r\n        }\r\n\r\n        return this.inject();\r\n    }\r\n\r\n    configureRaven(noConflict) {\r\n        if (noConflict) {\r\n            this.RavenInstance = Raven.noConflict();\r\n            this.RavenInstance.config(this.RAVEN_PROJECT, { tags: { instance: 'exp' } }).install();\r\n        \r\n            if (this.RavenInstance.isSetup()) {\r\n                var exp_cookie = false;\r\n                document.cookie.split(/\\s*;\\s*/).forEach(function(val) {var [k,v]=val.split(/=/);if(k=='__exponea_etc__') exp_cookie = decodeURIComponent(v);});\r\n                if (exp_cookie) {\r\n                    this.RavenInstance.setUserContext( { exponea_cookie: exp_cookie } );\r\n                };\r\n            }\r\n        } else {\r\n            this.RavenInstance = Raven;\r\n        }\r\n    }\r\n\r\n    /* Method for injecting the banner into DOM */\r\n    inject() {\r\n        /* For control group do not inject and only track show */\r\n        if (false) { /* TODO: How to check control_group from context */\r\n            this.loaded();\r\n        }\r\n\r\n        /* Render Exp banner */\r\n        this.render();\r\n\r\n        /* Initialize model */\r\n        this.initializeModel(this.data);\r\n\r\n        /* Create the main tunnel of bindings between HTML with JS */\r\n        this.bindModels();\r\n        this.bindMethods();\r\n        this.bindAttributes();\r\n        this.bindClose();\r\n        this.bindFors();\r\n        this.bindIfs()\r\n\r\n        /* Load recommendations */\r\n        this.loadRecommendations()\r\n\r\n        /* Renders optional objects alongside with banners */\r\n        if (this.backdrop !== null) this.addBackdrop();\r\n        if (this.branded !== false) this.addBranding();\r\n        /* Adds exponea-animate class to app */\r\n        this.addAnimationClass();\r\n\r\n        /* Track show if tracking is set to true  */\r\n        if (this.tracking && this.sdk !== null && this.context !== null) {\r\n            this.sdk.track('banner', this.getEventProperties('show', false));\r\n        }\r\n\r\n        /* Call mounted function if set */\r\n        if (this.mounted !== null && !this.control_group) this.mounted.call(this.model);\r\n    \r\n        return this.model;\r\n    }\r\n\r\n    /* Initalize model from data */\r\n    initializeModel(data) {\r\n        var self = this;\r\n        Object.keys(data).forEach(key => {\r\n            var value = data[key];\r\n            /* Define new setters to update model on change */\r\n            Object.defineProperty(self.model, key, {\r\n                enumerable: true,\r\n                get() {\r\n                    return value;\r\n                },\r\n                set(val) {\r\n                    value = val;\r\n                    self.updateBindings(key, value);\r\n                    self.updateModels(key, value);\r\n                    self.updateIfs(key, value);\r\n                    self.updateAttributes(key, value);\r\n                }\r\n            });\r\n            self.model[key] = value;\r\n        });\r\n\r\n        /* Copy methods from this.methods to this.model scope so it can be accessed with `this` */\r\n        if (this.methods !== null) {\r\n            for (var key of Object.keys(this.methods)) {\r\n                this.model[key] = this.methods[key];\r\n            }\r\n        }\r\n\r\n        /* Bind helper methods */\r\n        this.model.$anim = require('./helpers/anim.js');\r\n        this.model.$validateEmail = require('./helpers/validateEmail.js');\r\n\r\n        /* Bind special methods to be used in `this` scope */\r\n        this.model.removeBanner = this.removeBanner.bind(this, this.app);\r\n        this.model.sdk = this.sdk;\r\n    }\r\n\r\n    /* Render Exp banner by injecting it into DOM and adding style */\r\n    render() {\r\n        /* Use el to find element over which to mask Exp */\r\n        if (this.el !== null) {\r\n            this.app = document.querySelector(this.el);\r\n        /* Otherwise check for HTML code which would be created and injected into DOM */\r\n        } else if (this.html !== null) {\r\n            /* Insert HTML to page */\r\n            let el = document.createElement('div');\r\n            el.innerHTML = this.html.trim();\r\n            /* Append the element to target or to body */\r\n            if (this.attach !== null) {\r\n                this.app = document.querySelector(this.attach).appendChild(el.firstChild);\r\n            } else {\r\n                this.app = document.body.appendChild(el.firstChild);\r\n            }\r\n        } else {\r\n            return;\r\n        }\r\n        /* Handles CSS inserting and scoping */\r\n        if (this.style !== null) {\r\n            if (this.scoped) {\r\n                /* Quickly add style which is disabled, rename it and remove it */\r\n                let style = this.addStyle(this.style, true);\r\n                let rules = this.listify(style.sheet.cssRules);\r\n                var scopedStyle = \"\";\r\n                /* Iterate over CSS rules */\r\n                rules.forEach(rule => {\r\n                    /* Check rule is instances of CSSStyleRule */\r\n                    if (rule instanceof CSSStyleRule) {\r\n                        scopedStyle = scopedStyle + this.generateScopedRule(rule);\r\n                    }\r\n                    /* Rule is media query */\r\n                    if (rule instanceof CSSMediaRule) {\r\n                        scopedStyle = scopedStyle + `@media ${rule.conditionText} {`\r\n                        this.listify(rule.cssRules).forEach(rule => {\r\n                            scopedStyle = scopedStyle + this.generateScopedRule(rule);\r\n                        });\r\n                        scopedStyle = scopedStyle + `}`;\r\n                    }\r\n                });\r\n                /* Remove original style */\r\n                style.parentNode.removeChild(style);\r\n                /* Append scoped style */\r\n                this.addStyle(scopedStyle);\r\n            } else {\r\n                /* Append style with global scope */\r\n                this.addStyle(this.style);\r\n            }\r\n        }\r\n    }\r\n\r\n    /* Initial binding of input models */\r\n    bindModels() {\r\n        let selector = [\"email\", \"number\", \"search\", \"tel\", \"text\", \"url\", \"checkbox\", \"radio\"].map(input => {\r\n            return `input[type=\"${input}\"][exp-model]`;\r\n        });\r\n        selector = selector.concat([\"textarea[exp-model]\", \"select[exp-model]\"]);\r\n        /* Find all input elements */\r\n        var inputs = this.select(selector.join());\r\n        inputs.forEach(input => {\r\n            const model = input.getAttribute(\"exp-model\");\r\n            const type = input.getAttribute(\"type\");\r\n            /* Handle different input types */\r\n            if (type === \"checkbox\") {\r\n                input.addEventListener(\"change\", event => {\r\n                    this.model[model] = event.target.checked;\r\n                });\r\n            } else if (type === \"radio\") {\r\n                input.addEventListener(\"change\", event => {\r\n                    this.model[model] = event.target.value;\r\n                });\r\n            } else {\r\n                input.addEventListener(\"input\", event => {\r\n                    this.model[model] = event.target.value;\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Initial bindings of methods */\r\n    bindMethods(template = undefined) {\r\n        var self = this;\r\n        let supportedEvents = [\"click\", \"submit\", \"input\", \"hover\", \"blur\", \"focus\", \"mouseenter\", \"mouseleave\", \"action\"];\r\n        let selector = supportedEvents.map(event => {\r\n            return `*[exp-${event}]`;\r\n        });\r\n        var events = this.select(selector.join(), template);\r\n        events.forEach(el => {\r\n            supportedEvents.forEach(event => {\r\n                var method = el.getAttribute('exp-' + event);\r\n                /* If exp-action is declared then add appropriate EventListener */\r\n                if (event == 'action') {\r\n                    el.addEventListener('click', function(e) {\r\n                        if (this.tracking && this.sdk !== null && this.context !== null) {\r\n                            this.sdk.track('banner', this.getEventProperties('click'));\r\n                        }\r\n                    });\r\n                }\r\n\r\n                if (method === null || !(method in self.methods)) return;\r\n                el.addEventListener(event, function(e) {\r\n                    self.methods[method].apply(self.model, [e]);\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    /* Binds DOM object attribute values with model */\r\n    bindAttributes() {\r\n        const self = this;\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\", \"title\", \"disabled\"];\r\n        let selector = supportedAttributes.map(attr => {\r\n            return `*[exp-${attr}]`;\r\n        });\r\n        const elements = this.select(selector.join());\r\n        elements.forEach(el => {\r\n            supportedAttributes.forEach(attr => {\r\n                var val = el.getAttribute('exp-' + attr);\r\n                if (val === null || !(val in self.model)) return;\r\n                /* Update value according to data in model */\r\n                el.setAttribute(attr, self.model[val]);\r\n            })\r\n        })\r\n    }\r\n\r\n    /* Binds the close button with tracking and deleting functionality */\r\n    bindClose() {\r\n        let selector = `[exp-close]`;\r\n        var elements = this.select(selector);\r\n        elements.forEach(el => {\r\n            el.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                this.removeBanner();\r\n                /* Track 'close' if tracking is set to true */\r\n                if (this.tracking && this.sdk !== null && this.context !== null) {\r\n                    this.sdk.track('banner', this.getEventProperties('close'));\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    /* Bind exp-ifs */ \r\n    bindIfs() {\r\n        const expIfs = this.select(`[exp-if]`);\r\n        expIfs.forEach(el => {\r\n            /* BUG: does not check the original display value, assumes block */\r\n            const attr = el.getAttribute(\"exp-if\");\r\n            if (this.model[attr] !== null && this.model[attr] !== undefined) {\r\n                el.style.display = (this.model[attr] ? \"block\" : \"none\");\r\n            } else {\r\n                throw `exp-if attribute ${attr} is not defined in model.`\r\n                this.model[attr] = null;\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Creates access to elements from model scope */\r\n    bindRefs() {\r\n        let selecor = `[exp-ref]`;\r\n        var elements = this.select(selecor);\r\n        elements.forEach(el => {\r\n            let val = el.getAttribute('exp-ref');\r\n            if (val && val !== '') {\r\n                this.model.$refs[val] = el\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Instantiates and binds exp-for with model */\r\n    bindFors() {\r\n        const expFors = this.select(`[exp-for], [exp-rcm]`);\r\n        expFors.forEach(expFor => {\r\n            /* Tokenize and parse attribute */\r\n            let attr = expFor.hasAttribute('exp-for') ? 'exp-for' : 'exp-rcm';\r\n            let key = expFor.getAttribute(attr).split(' ')[0];\r\n            let arrayName = expFor.getAttribute(attr).split(' ')[2];\r\n            let hash = 'e-' + this.getUuid();\r\n            let template = expFor.cloneNode(true);\r\n            /* Delete exp-for attribute */\r\n            template.removeAttribute(\"exp-for\");\r\n            /* Copy template into storage, with the root element */\r\n            if (arrayName in this.__storage.loopDefinitions) {\r\n                const sibling = (expFor.nextElementSibling !== null && expFor.nextElementSibling.getAttribute('exp-for') !== null) ? null : expFor.nextElementSibling;\r\n                this.__storage.loopDefinitions[arrayName].push({\r\n                    template: template,\r\n                    parentElement: expFor.parentNode,\r\n                    siblingElement: sibling\r\n                });\r\n            } else {\r\n                const sibling = (expFor.nextElementSibling !== null && expFor.nextElementSibling.getAttribute('exp-for') !== null) ? null : expFor.nextElementSibling;\r\n                this.__storage.loopDefinitions[arrayName] = [{\r\n                    template: template,\r\n                    parentElement: expFor.parentNode,\r\n                    siblingElement: sibling\r\n                }];\r\n            };\r\n            /* Remove all children elements */\r\n            expFor.remove();\r\n            /* Check if array exists in model and render multiple templates */\r\n            if (this.model[arrayName]) {\r\n                this.model[arrayName].forEach(item => {\r\n                    this.renderNewElement(arrayName, key, item);\r\n                });\r\n            } else {\r\n                this.model[arrayName] = [];\r\n            }\r\n            /* Override the push method of array in the model for reactivity */\r\n            this.overridePush(this.model[arrayName], arrayName, key);\r\n        });\r\n    }\r\n\r\n    writeBindValue(value, el) {\r\n        const parsedAttributes = el.getAttribute('exp-bind').split('|');\r\n        \r\n        if (parsedAttributes.length > 1) {\r\n            let intermediateValue = value;\r\n\r\n            for (let i = 1; i < parsedAttributes.length; i++) {\r\n                const filter = parsedAttributes[i].trim();\r\n\r\n                if (filter in this.filters) {\r\n                    intermediateValue = this.filters[filter].call(this.model, intermediateValue);\r\n                }\r\n            }\r\n\r\n            el.textContent = intermediateValue;\r\n        } else {\r\n            el.textContent = value;\r\n        }\r\n    }\r\n\r\n    /* Method for updating all exp-binds */\r\n    updateBindings(key, value, el = null) {\r\n        const bindings = this.select(`*[exp-bind~=\"${key}\"]`);\r\n        bindings.forEach(el => {\r\n            this.writeBindValue(value, el);\r\n        });\r\n    }\r\n\r\n    /* Method for updating input exp-models */\r\n    updateModels(key, value) {\r\n        const modelBindings = this.select(`*[exp-model=\"${key}\"]`);\r\n        modelBindings.forEach(input => {\r\n            const model = input.getAttribute(\"exp-model\");\r\n            const type = input.getAttribute(\"type\");\r\n            /* Handle different input types */\r\n            if (type == \"checkbox\") {\r\n                input.checked = !!value;\r\n            } else if (type == \"radio\") {\r\n                if (input.value == value) input.checked = true;\r\n            } else {\r\n                input.value = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /* Method for updating exp-ifs */ \r\n    updateIfs(key, value) {\r\n        const expIfs = this.select(`*[exp-if=\"${key}\"]`);\r\n        expIfs.forEach(el => {\r\n            /* BUG: does not check the original display value, assumes block */\r\n            el.style.display = (value ? \"block\" : \"none\");\r\n        });\r\n    }\r\n\r\n    /* Method for updating attributes */\r\n    updateAttributes(key, value) {\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\", \"title\", \"disabled\"];\r\n        let selector = supportedAttributes.map(attr => {\r\n            return `*[exp-${attr}=\"${key}\"]`;\r\n        });\r\n        const that = this;\r\n        const elements = this.select(selector.join());\r\n\r\n        elements.forEach(el => {\r\n            supportedAttributes.forEach(attr => {\r\n                var val = el.getAttribute('exp-' + attr);\r\n                if (val === null || !(val in that.model)) return;\r\n                \r\n                el[attr] = that.model[val];\r\n            })\r\n        });\r\n    }\r\n\r\n\r\n    /* Renders a new element of an array */\r\n    renderNewElement(arrayName, key, item) {\r\n        const supportedAttributes = [\"src\", \"href\", \"alt\"];\r\n        /* Iterate through all exp-for instances linked to targeted array */\r\n        for (expForInstance of this.__storage.loopDefinitions[arrayName]) {\r\n            /* Clone the template and populate it with element data */\r\n            var template = expForInstance.template.cloneNode(true);\r\n            let attrSelector = supportedAttributes.map(attr => {\r\n                return `*[exp-${attr}]`;\r\n            });\r\n            const expAttrs = this.select(attrSelector.join(), template);\r\n            const expBinds = this.select(`[exp-bind]`, template);\r\n            /* Override attributes of the node */\r\n            expAttrs.forEach(el => {\r\n                supportedAttributes.forEach(attr => {\r\n                    const val = el.getAttribute('exp-' + attr);\r\n                    if (val === null) return;\r\n                    if (val.indexOf('.') == -1) {\r\n                        el[attr] = item;\r\n                    } else {\r\n                        const keys = val.split('.');\r\n                        const value = this.findLastField(keys.slice(1), item);\r\n                        el[attr] = value;\r\n                    };\r\n                });\r\n            });\r\n            /* Override inner value of the node */\r\n            expBinds.forEach(el => {\r\n                const val = el.getAttribute('exp-bind');\r\n                if (val.indexOf('.') == -1) {\r\n                    this.writeBindValue(item, el);\r\n                } else {\r\n                    const keys = val.split('.');\r\n                    var value = this.findLastField(keys.slice(1), item);\r\n                    el.textContent = value\r\n                }\r\n            });\r\n            /* Append all children of the newly populated template */\r\n            expForInstance.parentElement.insertBefore(template, expForInstance.siblingElement);\r\n        }\r\n    }\r\n\r\n    /* Override the push function with reactivity functionality */\r\n    overridePush(array, arrayName, key) {\r\n        let self = this;\r\n        array.push = (_ => {\r\n            var original = Array.prototype.push;\r\n            return function() {\r\n                const ret = original.apply(this, arguments);\r\n                self.renderNewElement(arrayName, key, arguments[0]);\r\n                return ret;\r\n            };\r\n        })();\r\n    }\r\n\r\n    /* Method for inserting stylesheet */\r\n    addStyle(css, disabled = false){\r\n        if (this.app === null) return;\r\n        var style = document.createElement('style');\r\n        style.type= 'text/css';\r\n        style.appendChild(document.createTextNode(css)); /* BUG: Does not work in IE8 or less */\r\n        var inserted = this.app.appendChild(style);\r\n        inserted.sheet.disabled = disabled;\r\n        return inserted;\r\n    }\r\n\r\n    /* Method for adding unique ID to CSS selectors */\r\n    generateScopedRule(rule) {\r\n        let selectors = rule.selectorText.split(',');\r\n        let selectorsText = selectors.map(selector => {\r\n            let attr = `exp-${this.getUuid()}`;\r\n            this.addAttributes(selector.trim(), attr);\r\n            if (selector.includes(\".exponea-animate\")) {\r\n                return `${selector}[${this.bannerId}]`\r\n            }\r\n            if (this.select(selector.trim()).length > 0) {\r\n                return `${selector}[${attr}]`;\r\n            }\r\n            return  `${selector}`;\r\n        });\r\n        return `${selectorsText.join()} { ${rule.style.cssText} }`;\r\n    }\r\n\r\n    /* Handle backdrop option */\r\n    addBackdrop() {\r\n        if (this.app == null) return;\r\n        /* Set default backdrop style */\r\n        let backdropStyle = { \r\n            \"position\": \"fixed\",\r\n            \"top\": \"0\",\r\n            \"left\": \"0\",\r\n            \"width\": \"100vw\",\r\n            \"height\": \"100vh\",\r\n            \"z-index\": \"9999\",\r\n            \"background\": \"rgba(0,0,0,0.7)\"\r\n        }\r\n        /* Customize backdrop. If style=true then iterates over an empty array */\r\n        for (var key of Object.keys(this.backdrop)) {\r\n            backdropStyle[key] = this.backdrop[key];\r\n        }\r\n        /* Inject element into DOM */\r\n        let backdrop = document.createElement('div');\r\n        this.setStyleFromObject(backdropStyle, backdrop);\r\n        this.app.parentNode.style['position'] = \"relative\";\r\n        this.app.style[\"z-index\"] = \"9999999\";\r\n        this.backdrop = this.app.parentNode.appendChild(backdrop);\r\n        /* Add event listener which removes banner on click */\r\n        this.backdrop.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            this.removeBanner();\r\n        })\r\n    }\r\n\r\n    /* Adds Powered by Exponea branding */\r\n    addBranding() {\r\n        if (this.app === null) return;\r\n        var branding = document.createElement('object');\r\n        var uuid = this.getUuid();\r\n        branding.setAttribute(`e${uuid}`, '')\r\n        this.addStyle(`[e${uuid}]{font-size:11px;position:absolute;opacity:.6;right:5px;bottom:5px;padding-top:0;text-decoration:none;display:block}[e${uuid}]:hover{opacity:.9}[e${uuid}] a{color: ${this.branded}}`);\r\n        branding.innerHTML = '<a href=\"https://exponea.com/?utm_campaign=exponea-web-layer&amp;utm_medium=banner&amp;utm_source=referral\" target=\"_blank\">Powered by Exponea</a>';\r\n        this.app.appendChild(branding);\r\n    }\r\n\r\n    /* Adds exponea-animate class which is responsible for smooth transitions */\r\n    addAnimationClass(className = \"exponea-animate\") {\r\n        if (this.app === null) return;\r\n        if (this.app.classList) {\r\n            this.app.setAttribute(this.bannerId, '');\r\n            this.app.classList.add(className);\r\n        } else {\r\n            this.app.className += ' ' + className;\r\n        }\r\n    }\r\n\r\n    /* Loads Exponea recommendation and inserts into model */\r\n    loadRecommendations() {\r\n        Object.keys(this.recommendations).forEach((rcm) => {\r\n            /* Has to already exist due to exp-for initialization */\r\n            if (this.model[rcm]) {\r\n                /* Option parameters according to Exponea JS SDK */\r\n                var options = {\r\n                    recommendationId: this.recommendations[rcm].id,\r\n                    size: this.recommendations[rcm].total,\r\n                    callback: data => {\r\n                        /* Push to model */\r\n                        if (data && data.length > 0) {\r\n                            data.forEach(item => {\r\n                                this.model[rcm].push(item)\r\n                            })\r\n                        }\r\n                        /* Update loading key */\r\n                        if (this.recommendations[rcm].loadingKey !== undefined) {\r\n                            this.model[this.recommendations[rcm].loadingKey] = true;\r\n                        }\r\n                    },\r\n                    fillWithRandom: true\r\n                };\r\n                /* Generate recommendation */\r\n                if (this.sdk && this.sdk.getRecommendation) {\r\n                    this.sdk.getRecommendation(options);\r\n                } else {\r\n                    if (this.recommendations[rcm].loadingKey !== undefined) {\r\n                        this.model[this.recommendations[rcm].loadingKey] = true;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /* Remove banner */\r\n    removeBanner() {\r\n        if (this.app === null) return\r\n        this.app.parentNode.removeChild(this.app);\r\n        if (this.backdrop !== null) this.backdrop.parentNode.removeChild(this.backdrop);\r\n    }\r\n\r\n    /**\r\n     * Helper functions\r\n     */\r\n\r\n    /* Return Array from DOM elements collection list */\r\n    listify(list) {\r\n        return Array.prototype.slice.call(list);\r\n    }\r\n    /* Return array from querySelector */\r\n    select(selector, scope = this.app) {\r\n        if (scope === null) return []\r\n        var elements = this.listify(scope.querySelectorAll(selector));\r\n        if (scope.matches(selector)) {\r\n            elements.push(scope);\r\n        }\r\n        return elements;\r\n    }\r\n    /* Helper method for adding attribute, used by CSS scoping */\r\n    addAttributes(selector, attr, val = \"\") {\r\n        this.select(selector).forEach(el => {\r\n            el.setAttribute(attr, val);\r\n        })\r\n    }\r\n    /* Helper method for generating unique IDs, used by CSS scoping */\r\n    getUuid() {\r\n        var firstPart = (Math.random() * 46656) | 0;\r\n        var secondPart = (Math.random() * 46656) | 0;\r\n        firstPart = (\"000\" + firstPart.toString(36)).slice(-3);\r\n        secondPart = (\"000\" + secondPart.toString(36)).slice(-3);\r\n        return firstPart + secondPart;\r\n    }\r\n    /* Add inline style to element */\r\n    setStyleFromObject(object, el) {\r\n        for (var property in object) {\r\n            el.style[property] = object[property];\r\n        }\r\n    }\r\n    /* Helper method for creating event attributes for tracking */\r\n    getEventProperties(action, interactive) {\r\n        if (this.context === null) return;\r\n        return { \r\n            action: action,\r\n            banner_id: this.context.banner_id,\r\n            banner_name: this.context.banner_name,\r\n            banner_type: this.context.banner_type,\r\n            variant_id: this.context.variant_id,\r\n            variant_name: this.context.variant_name,\r\n            interaction: interactive !== false ? true : false,\r\n            location: window.location.href,\r\n            path: window.location.pathname\r\n        };\r\n    }\r\n    /* Helper method for finding nested fields in nested dictionaries */\r\n    findLastField(items, dict) {\r\n        if (items.length == 1) return dict[items[0]];\r\n        else return rec(items.slice(1), dict[items[0]]);\r\n    }\r\n}\r\n\r\nwindow.Exp = Exp;\r\n"]}
>>>>>>> Add sentry integration and add more stuff to documentation

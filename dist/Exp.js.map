{"version":3,"sources":["webpack:///webpack/bootstrap f76eb7f4edbfd3a2afb3","webpack:///./src/Exp.js"],"names":["Exp","settings","app","document","querySelector","el","data","methods","model","watcher","bindModels","bindMethods","moveMethods","undefined","Object","keys","key","value","bindings","select","forEach","textContent","modelBindings","expIfs","style","display","that","defineProperty","enumerable","get","set","val","updateBindings","updateModels","updateIfs","selector","map","input","inputs","join","getAttribute","addEventListener","event","target","supportedEvents","events","method","apply","Array","prototype","slice","call","querySelectorAll","window"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;IC7DMA,G;AACF,iBAAYC,QAAZ,EAAsB;AAAA;;AAClB;AACA,aAAKC,GAAL,GAAWC,SAASC,aAAT,CAAuBH,SAASI,EAAhC,CAAX;;AAEA,aAAKC,IAAL,GAAYL,SAASK,IAArB;AACA,aAAKC,OAAL,GAAeN,SAASM,OAAxB;;AAEA;AACA,aAAKC,KAAL,GAAa,EAAb;;AAEA;AACA,aAAKC,OAAL,CAAa,KAAKH,IAAlB;;AAEA;AACA,aAAKI,UAAL;AACA,aAAKC,WAAL;;AAEA;AACA,aAAKC,WAAL;;AAEA,eAAO,KAAKJ,KAAZ;AACH;;;;sCAEa;AACV,gBAAI,KAAKD,OAAL,KAAiBM,SAArB,EAAgC;;AADtB;AAAA;AAAA;;AAAA;AAGV,qCAAgBC,OAAOC,IAAP,CAAY,KAAKR,OAAjB,CAAhB,8HAA2C;AAAA,wBAAlCS,GAAkC;;AACvC,yBAAKR,KAAL,CAAWQ,GAAX,IAAkB,KAAKT,OAAL,CAAaS,GAAb,CAAlB;AACH;AALS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMb;;;uCAEcA,G,EAAKC,K,EAAO;AACvB,gBAAMC,WAAW,KAAKC,MAAL,mBAA2BH,GAA3B,SAAjB;;AAEAE,qBAASE,OAAT,CAAiB,cAAM;AACnBf,mBAAGgB,WAAH,GAAiBJ,KAAjB;AACH,aAFD;AAGH;;;qCAEYD,G,EAAKC,K,EAAO;AACrB,gBAAMK,gBAAgB,KAAKH,MAAL,oBAA4BH,GAA5B,SAAtB;;AAEAM,0BAAcF,OAAd,CAAsB,cAAM;AACxBf,mBAAGY,KAAH,GAAWA,KAAX;AACH,aAFD;AAGH;;;kCAESD,G,EAAKC,K,EAAO;AAClB,gBAAMM,SAAS,KAAKJ,MAAL,iBAAyBH,GAAzB,SAAf;;AAEAO,mBAAOH,OAAP,CAAe,cAAM;AACjBf,mBAAGmB,KAAH,CAASC,OAAT,GAAoBR,QAAQ,OAAR,GAAkB,MAAtC;AACH,aAFD;AAGH;;;gCAEOT,K,EAAO;AACX,gBAAIkB,OAAO,IAAX;AACAZ,mBAAOC,IAAP,CAAYP,KAAZ,EAAmBY,OAAnB,CAA2B,eAAO;AAC9B,oBAAIH,QAAQT,MAAMQ,GAAN,CAAZ;;AAEAF,uBAAOa,cAAP,CAAsBD,KAAKlB,KAA3B,EAAkCQ,GAAlC,EAAuC;AACnCY,gCAAY,IADuB;AAEnCC,uBAFmC,iBAE7B;AACF,+BAAOZ,KAAP;AACH,qBAJkC;AAKnCa,uBALmC,eAK/BC,GAL+B,EAK1B;AACLd,gCAAQc,GAAR;AACAL,6BAAKM,cAAL,CAAoBhB,GAApB,EAAyBC,KAAzB;AACAS,6BAAKO,YAAL,CAAkBjB,GAAlB,EAAuBC,KAAvB;AACAS,6BAAKQ,SAAL,CAAelB,GAAf,EAAoBC,KAApB;AACH;AAVkC,iBAAvC;;AAaAS,qBAAKlB,KAAL,CAAWQ,GAAX,IAAkBC,KAAlB;AACH,aAjBD;AAkBH;;;qCAEY;AAAA;;AACT,gBAAIkB,WAAW,CAAC,OAAD,EAAU,QAAV,EAAoB,QAApB,EAA8B,KAA9B,EAAqC,MAArC,EAA6C,KAA7C,EAAoDC,GAApD,CAAwD,iBAAS;AAC5E,yCAAsBC,KAAtB;AACH,aAFc,CAAf;;AAIA,gBAAIC,SAAS,KAAKnB,MAAL,CAAYgB,SAASI,IAAT,EAAZ,CAAb;;AAEAD,mBAAOlB,OAAP,CAAe,iBAAS;AACpB,oBAAIZ,QAAQ6B,MAAMG,YAAN,CAAmB,WAAnB,CAAZ;AACAH,sBAAMpB,KAAN,GAAc,MAAKT,KAAL,CAAWA,KAAX,CAAd;;AAEA6B,sBAAMI,gBAAN,CAAuB,OAAvB,EAAgC,iBAAS;AACrC,0BAAKjC,KAAL,CAAWA,KAAX,IAAoBkC,MAAMC,MAAN,CAAa1B,KAAjC;AACH,iBAFD;AAGH,aAPD;AAQH;;;sCAEa;AACV,gBAAIS,OAAO,IAAX;AACA,gBAAIkB,kBAAkB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,CAAtB;AACA,gBAAIT,WAAWS,gBAAgBR,GAAhB,CAAoB,iBAAS;AACxC,kCAAgBM,KAAhB;AACH,aAFc,CAAf;;AAIA,gBAAIG,SAAS,KAAK1B,MAAL,CAAYgB,SAASI,IAAT,EAAZ,CAAb;;AAEDM,mBAAOzB,OAAP,CAAe,cAAM;AACjBwB,gCAAgBxB,OAAhB,CAAwB,iBAAS;AAC7B,wBAAI0B,SAASzC,GAAGmC,YAAH,CAAgB,SAASE,KAAzB,CAAb;AACA,wBAAII,WAAW,IAAX,IAAmB,EAAEA,UAAUpB,KAAKnB,OAAjB,CAAvB,EAAkD;;AAElDF,uBAAGoC,gBAAH,CAAoBC,KAApB,EAA2B,YAAW;AAClChB,6BAAKnB,OAAL,CAAauC,MAAb,EAAqBC,KAArB,CAA2BrB,KAAKlB,KAAhC;AACH,qBAFD;AAGH,iBAPD;AAQH,aATD;AAUF;;;+BAEM2B,Q,EAAU;AACb,mBAAOa,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2B,KAAKjD,GAAL,CAASkD,gBAAT,CAA0BjB,QAA1B,CAA3B,CAAP;AACH;;;;;;AAGLkB,OAAOrD,GAAP,GAAaA,GAAb,C","file":"Exp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f76eb7f4edbfd3a2afb3","class Exp {\r\n    constructor(settings) {\r\n        /* Find application element */\r\n        this.app = document.querySelector(settings.el);\r\n\r\n        this.data = settings.data;\r\n        this.methods = settings.methods;\r\n\r\n        /* init model */\r\n        this.model = {};\r\n\r\n        /* init watcher */\r\n        this.watcher(this.data);\r\n\r\n        /* bind all models and methods */\r\n        this.bindModels();\r\n        this.bindMethods();\r\n\r\n        /* move methods to model for outside use */\r\n        this.moveMethods();\r\n\r\n        return this.model;\r\n    }\r\n\r\n    moveMethods() {\r\n        if (this.methods === undefined) return;\r\n\r\n        for (var key of Object.keys(this.methods)) {\r\n            this.model[key] = this.methods[key];\r\n        }\r\n    }\r\n\r\n    updateBindings(key, value) {\r\n        const bindings = this.select(`*[exp-bind=\"${key}\"]`);\r\n\r\n        bindings.forEach(el => {\r\n            el.textContent = value;\r\n        });\r\n    }\r\n\r\n    updateModels(key, value) {\r\n        const modelBindings = this.select(`*[exp-model=\"${key}\"]`);\r\n\r\n        modelBindings.forEach(el => {\r\n            el.value = value;\r\n        });\r\n    }\r\n\r\n    updateIfs(key, value) {\r\n        const expIfs = this.select(`*[exp-if=\"${key}\"]`);\r\n\r\n        expIfs.forEach(el => {\r\n            el.style.display = (value ? \"block\" : \"none\");\r\n        });\r\n    }\r\n\r\n    watcher(model) {\r\n        var that = this;\r\n        Object.keys(model).forEach(key => {\r\n            var value = model[key];\r\n\r\n            Object.defineProperty(that.model, key, {\r\n                enumerable: true,\r\n                get() {\r\n                    return value;\r\n                },\r\n                set(val) {\r\n                    value = val;\r\n                    that.updateBindings(key, value);\r\n                    that.updateModels(key, value);\r\n                    that.updateIfs(key, value);\r\n                }\r\n            });\r\n\r\n            that.model[key] = value;\r\n        });\r\n    }\r\n\r\n    bindModels() {\r\n        let selector = [\"email\", \"number\", \"search\", \"tel\", \"text\", \"url\"].map(input => {\r\n            return `input[type=\"${input}\"][exp-model]`;\r\n        })\r\n\r\n        var inputs = this.select(selector.join());\r\n\r\n        inputs.forEach(input => {\r\n            let model = input.getAttribute(\"exp-model\");\r\n            input.value = this.model[model];\r\n\r\n            input.addEventListener(\"input\", event => {\r\n                this.model[model] = event.target.value;\r\n            });\r\n        });\r\n    }\r\n\r\n    bindMethods() {\r\n        var that = this;\r\n        let supportedEvents = [\"click\", \"submit\", \"input\"];\r\n        let selector = supportedEvents.map(event => {\r\n            return `*[exp-${event}]`;\r\n        })\r\n\r\n        var events = this.select(selector.join());\r\n\r\n       events.forEach(el => {\r\n           supportedEvents.forEach(event => {\r\n               var method = el.getAttribute('exp-' + event);\r\n               if (method === null || !(method in that.methods)) return;\r\n\r\n               el.addEventListener(event, function() {\r\n                   that.methods[method].apply(that.model);\r\n               });\r\n           });\r\n       });\r\n    }\r\n\r\n    select(selector) {\r\n        return Array.prototype.slice.call(this.app.querySelectorAll(selector));\r\n    }\r\n}\r\n\r\nwindow.Exp = Exp;\n\n\n// WEBPACK FOOTER //\n// ./src/Exp.js"],"sourceRoot":""}